<div class="container">
    <div class="mt-3"></div>
    <!--alert-->
    <div ng-include="'/views/common/Alert.html'"></div>
    <!--end alert-->
    <header>
        <ul class="nav nav-tabs row" id="myTab" role="tablist">
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link active" id="waitconfirm-tab" data-bs-toggle="tab" data-bs-target="#waitconfirm"
                    type="button" role="tab" aria-controls="waitconfirm" aria-selected="true" style="color: black;">
                    <i class="bi bi-calendar3-week"></i>
                    Đơn chờ xác nhận
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="confirmed-tab" data-bs-toggle="tab" data-bs-target="#confirmed" type="button"
                    role="tab" aria-controls="confirmed" aria-selected="false" style="color: black;">
                    <i class="bi bi-calendar3-week"></i>
                    Đơn đang xử lý
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="waitfortheshippertopickup-tab" data-bs-toggle="tab"
                    data-bs-target="#waitfortheshippertopickup" type="button" role="tab"
                    aria-controls="waitfortheshippertopickup" aria-selected="false" style="color: black;">
                    <i class="bi bi-calendar3-week"></i>
                    Đơn chờ vận chuyển
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="delivering-tab" data-bs-toggle="tab" data-bs-target="#delivering"
                    type="button" role="tab" aria-controls="delivering" aria-selected="false" style="color: black;">
                    <i class="bi bi-calendar3-week"></i>
                    Đang giao hàng
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="delivered-tab" data-bs-toggle="tab" data-bs-target="#delivered" type="button"
                    role="tab" aria-controls="delivered" aria-selected="false" style="color: black;">
                    <i class="bi bi-calendar-check"></i>
                    Đơn đã giao
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="nodelivery-tab" data-bs-toggle="tab" data-bs-target="#nodelivery"
                    type="button" role="tab" aria-controls="nodelivery" aria-selected="false" style="color: black;">
                    <i class="bi bi-calendar-x"></i>
                    Đơn không giao được
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="canceled-tab" data-bs-toggle="tab" data-bs-target="#canceled" type="button"
                    role="tab" aria-controls="canceled" aria-selected="false" style="color: black;">
                    <i class="bi bi-calendar-x"></i>
                    Đơn bị hủy
                </div>
            </li>
            <li class="nav-item col-3" role="presentation">
                <div class="nav-link" id="returnorder-tab" data-bs-toggle="tab" data-bs-target="#returnorder"
                    type="button" role="tab" aria-controls="returnorder" aria-selected="false" style="color: black;">
                    <i class="bi bi-arrow-left-right"></i>
                    Đổi - Trả hàng
                </div>
            </li>
        </ul>
        <div class="mt-3"></div>
    </header>

    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="waitconfirm" role="tabpanel" aria-labelledby="waitconfirm-tab">
            <h3 style="text-align: center;"><b>Đơn chờ xác nhận</b></h2>
                <div class="row mt-2">
                    <div class="row mt-2">
                        <div class="col-12 col-sm-6 col-xl-3">
                            <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                                ng-focus="searchOrderWaitConfirm()" ng-model="orderCode"
                                ng-keyup="searchOrderWaitConfirm()">
                        </div>
                        <div class="col-12 col-sm-6 col-xl-5">
                            <form class="d-flex">
                                <input class="form-control me-2" type="date" ng-model="beginDate"
                                    ng-change="changeBeginDateWaitConfirm()">
                                <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                                <input class="form-control me-2" type="date" ng-model="endDate"
                                    ng-change="changeEndDateWaitConfirm()">
                            </form>
                        </div>
                        <div class="col-12 col-sm-6 col-xl-2">
                            <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Giá tiền
                            </div>
                            <ul class="dropdown-menu" style="max-width: 244px;">
                                <li>
                                    <select class="form-select dropdown-item filter"
                                        ng-change="findOrderByTotalMoneyWaitConfirm()" ng-model="findByTotal">
                                        <option selected disabled>Gợi ý</option>
                                        <option value="1">0 - 1,000,000</option>
                                        <option value="2">1,000,000 - 3,000,000</option>
                                        <option value="3">3,000,000 - 5,000,000</option>
                                    </select>
                                </li>
                                <li>
                                    <b class="ps-3">Tùy chỉnh</b>
                                    <div class="mt-2">
                                        <div class="mt-2 ps-3 pe-3">
                                            <input type="number" class="form-control" placeholder="Từ"
                                                ng-model="findByTotalBegin"
                                                ng-change="findOrderByTotalMoneyWaitConfirm()" min="1"
                                                oninput="this.value = Math.abs(this.value)">
                                        </div>
                                        <div class="mt-2 ps-3 pe-3">
                                            <input type="number" class="form-control" placeholder="Đến"
                                                ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyWaitConfirm()"
                                                min="1" oninput="this.value = Math.abs(this.value)">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="col-1">
                            <button ng-click="resetOrderWaitConfirm()" class="btn btn-primary">Reset</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-12 mt-3">
                        <div class="row">
                            <div class="mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table id="example" class="table data-table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Mã ĐH</th>
                                                        <th>Thời gian</th>
                                                        <th>Khách hàng</th>
                                                        <th>Địa chỉ</th>
                                                        <th>Tổng tiền</th>
                                                        <th>Thanh toán</th>
                                                        <th>Trạng thái</th>
                                                        <th>Thao tác</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="order in orderwaitconfirms">
                                                        <td>{{order.code}}</td>
                                                        <td>{{order.createdDate | date:"dd/MM/yyyy ' - ' h:mma"}}</td>
                                                        <td>
                                                            {{order.customerName}} <br>
                                                            SĐT: {{order.phone}}
                                                        </td>
                                                        <td>
                                                            {{order.address}} <br>
                                                            {{order.ward}}, {{order.district}}, {{order.province}}
                                                        </td>
                                                        <td>
                                                            {{order.totalMoney | currency : "" : 0}}₫
                                                        </td>
                                                        <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán online
                                                        </td>
                                                        <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi nhận
                                                            hàng
                                                        </td>
                                                        <td>
                                                            <span ng-if="order.status == 'WAIT_FOR_CONFIRMATION' ">Đang
                                                                chờ
                                                                xác nhận</span>
                                                        </td>
                                                        <td>
                                                            <div class="row">
                                                                <div class="col-1 pt-1">
                                                                    <h4>
                                                                        <a href="#" data-bs-toggle="modal"
                                                                            data-bs-target="#confirm{{$index}}"
                                                                            style="color: rgb(29, 201, 231);">
                                                                            <i class="bi bi-check2-square"></i>
                                                                        </a>
                                                                    </h4>
                                                                </div>
                                                                <div class="col-1 pt-1">
                                                                    <h4>
                                                                        <a href="#" data-bs-toggle="modal"
                                                                            data-bs-target="#update{{$index}}"
                                                                            style="color: rgb(198, 198, 18);"
                                                                            ng-click="chosesOrderUpdateWaitConfirm($index)">
                                                                            <i class="bi bi-pencil-square"></i>
                                                                        </a>
                                                                    </h4>
                                                                </div>
                                                                <div class="col-1 pt-1">
                                                                    <h4>
                                                                        <a href="#" class="ps-2"
                                                                            style="color: rgb(234, 55, 55);"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-target="#unConfirm{{$index}}">
                                                                            <i class="bi bi-x-circle"></i>
                                                                        </a>
                                                                    </h4>
                                                                </div>
                                                            </div>

                                                            <!-- modal un confirm -->
                                                            <div class="modal fade" id="unConfirm{{$index}}"
                                                                tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Hủy đơn
                                                                                hàng</h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            Bạn có chắc chắn muốn hủy đơn hàng này ?
                                                                            <div class="mt-1">
                                                                                <textarea ng-model="order.description"
                                                                                    class="form-control" rows="3"
                                                                                    placeholder="Lý do hủy đơn *"></textarea>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button" class="btn btn-danger"
                                                                                data-bs-dismiss="modal"
                                                                                ng-click="unConfirmOrder(order, $index)">Xác
                                                                                nhận</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- modal confirm -->
                                                            <div class="modal fade" id="confirm{{$index}}" tabindex="-1"
                                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog modal-xl">
                                                                    <div class="modal-content">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalLabel">
                                                                                    Xác nhận đơn hàng {{order.code}}
                                                                                </h5>
                                                                                <button type="button" class="btn-close"
                                                                                    data-bs-dismiss="modal"
                                                                                    aria-label="Close"></button>
                                                                            </div>
                                                                            <!--table model-->
                                                                            <div class="modal-body">
                                                                                <div>
                                                                                    Mã đơn hàng: <b> {{order.code}} </b>
                                                                                    -
                                                                                    Ngày tạo:
                                                                                    <b>{{order.createdDate |
                                                                                        date:"dd/MM/yyyy ' - '
                                                                                        h:mma"}}</b>
                                                                                    - {{order.paymentType == "VNPAY"?"Đã
                                                                                    thanh toán
                                                                                    online" : "Thanh toán khi nhận
                                                                                    hàng"}}<br>
                                                                                    Tên khách hàng:
                                                                                    <b>{{order.customerName}} - SĐT:
                                                                                        {{order.phone}}</b> <br>
                                                                                    Địa chỉ: <b>{{order.address}}
                                                                                        {{order.ward ? "
                                                                                        ," : ""}} {{order.ward}}
                                                                                        {{order.district ?
                                                                                        " ," : ""}} {{order.district}}
                                                                                        {{order.province ? " ," : ""}}
                                                                                        {{order.province}}</b> <br>
                                                                                </div>
                                                                                <table class="mt-4 table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th>STT</th>
                                                                                            <th>Sản phẩm</th>
                                                                                            <th>Size</th>
                                                                                            <th>Màu sắc</th>
                                                                                            <th>Giá tiền</th>
                                                                                            <th>Số lượng</th>
                                                                                            <th>Tổng tiền</th>
                                                                                            <!-- <th>Thao tác</th> -->
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr
                                                                                            ng-repeat="orderDetail in order.orderDetails">
                                                                                            <td>{{$index + 1}}</td>
                                                                                            <td>
                                                                                                {{orderDetail.product.name}}
                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.productDetail.size.name}}
                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.productDetail.color.name}}

                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.price |
                                                                                                currency : ""
                                                                                                : 0}}₫

                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.quantity}}

                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.price *
                                                                                                orderDetail.quantity |
                                                                                                currency : ""
                                                                                                : 0}}₫
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <div>
                                                                                    <div
                                                                                        class="d-flex justify-content-end">
                                                                                        <div>
                                                                                            <p>Giảm giá:
                                                                                                <b
                                                                                                    ng-if="!order.voucher">0₫</b>
                                                                                                <b
                                                                                                    ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                    | currency : "" :
                                                                                                    0}}₫</b>
                                                                                            </p>
                                                                                            <p>Phí ship:
                                                                                                <b>+{{ order.totalShip |
                                                                                                    currency:
                                                                                                    "" : 0 }}₫</b>
                                                                                            </p>
                                                                                            <h5>Tổng tiền: <b>{{
                                                                                                    order.totalMoney |
                                                                                                    currency : "" :
                                                                                                    0}}₫</b>
                                                                                            </h5>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#confirm{{$index}}">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#confirmProduct{{$index}}">Xác
                                                                                nhận</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- Modal xác nhận confirm product -->
                                                            <div class="modal fade" id="confirmProduct{{$index}}"
                                                                tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                aria-hidden="true">
                                                                <div class="modal-dialog">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            Bạn có chắn chắn muốn xác nhận đơn hàng này
                                                                            không?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#confirm{{$index}}">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-dismiss="modal"
                                                                                ng-click="confirmOrder(order, $index)">Xác
                                                                                nhận</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- modal update -->
                                                            <div class="modal fade" id="update{{$index}}" tabindex="-1"
                                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog modal-xl">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Chi tiết đơn hàng: {{order.code}}
                                                                            </h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <!--table model-->
                                                                        <div class="modal-body row">
                                                                            <div class="col-11">
                                                                                Mã đơn hàng: <b> {{order.code}} </b> -
                                                                                Ngày
                                                                                tạo:
                                                                                <b>{{order.createdDate |
                                                                                    date:"dd/MM/yyyy '
                                                                                    - '
                                                                                    h:mma"}}</b> -
                                                                                {{order.paymentType == "VNPAY"?"Đã thanh
                                                                                toán
                                                                                online" : "Thanh toán khi nhận
                                                                                hàng"}}<br>

                                                                                <div class="row mt-3">
                                                                                    <div class="col-1">
                                                                                        <label for="">
                                                                                            <h2><i
                                                                                                    class="bi bi-person"></i>
                                                                                            </h2>
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-11">
                                                                                        <div class="row">
                                                                                            <div class="col-6">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    ng-model="order.customerName"
                                                                                                    placeholder="Tên người nhận">
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    ng-model="order.phone"
                                                                                                    placeholder="Số điện thoại">
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row mt-2"
                                                                                    ng-if="order.orderType == 'ONLINE' || order.orderType == 'ONLINE_WEB' ">
                                                                                    <div class="col-1">
                                                                                        <label for="">
                                                                                            <h2><i
                                                                                                    class="bi bi-geo-alt"></i>
                                                                                            </h2>
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-11">
                                                                                        <div class="row">
                                                                                            <div class="col-6">
                                                                                                <input
                                                                                                    class="form-control dropdown-toggle"
                                                                                                    type="text"
                                                                                                    id="orderProvince{{$index}}"
                                                                                                    ng-model="order.province"
                                                                                                    ng-focus="showProvince()"
                                                                                                    placeholder="Tỉnh, thành phố.."
                                                                                                    data-bs-toggle="dropdown"
                                                                                                    aria-expanded="false" />
                                                                                                <div class="dropdown-menu"
                                                                                                    aria-labelledby="orderProvince{{$index}}"
                                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                    <p id="province"
                                                                                                        ng-repeat="province in listProvince"
                                                                                                        ng-click="chooseProvince(province.ProvinceID, $parent.$index)">
                                                                                                        <a href=""
                                                                                                            style="text-decoration: none; color: black;">{{province.ProvinceName}}</a>
                                                                                                    </p>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <input
                                                                                                    class="form-control dropdown-toggle"
                                                                                                    type="text"
                                                                                                    id="orderDistrict{{$index}}"
                                                                                                    ng-model="order.district"
                                                                                                    ng-focus="showDistrict()"
                                                                                                    placeholder="Quận/Huyện..."
                                                                                                    data-bs-toggle="dropdown"
                                                                                                    aria-expanded="false" />
                                                                                                <div ng-show="order.province"
                                                                                                    class="dropdown-menu"
                                                                                                    aria-labelledby="orderDistrict{{$index}}"
                                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                    <p id="district"
                                                                                                        ng-repeat="district in listDistrict"
                                                                                                        ng-click="chooseDistrict(district.DistrictID, $parent.$index)">
                                                                                                        <a href=""
                                                                                                            style="text-decoration: none; color: black;">{{district.DistrictName}}</a>
                                                                                                    </p>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row mt-2">
                                                                                            <div class="col-6">
                                                                                                <input
                                                                                                    class="form-control dropdown-toggle"
                                                                                                    type="text"
                                                                                                    id="orderWard{{$index}}"
                                                                                                    ng-model="order.ward"
                                                                                                    ng-focus="showWard()"
                                                                                                    placeholder="Phường, xã..."
                                                                                                    data-bs-toggle="dropdown"
                                                                                                    aria-expanded="false" />
                                                                                                <div ng-show="order.district"
                                                                                                    class="dropdown-menu"
                                                                                                    aria-labelledby="orderWard{{$index}}"
                                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                    <p id="ward"
                                                                                                        ng-repeat="ward in listWard"
                                                                                                        ng-click="chooseWard(ward.WardCode, $parent.$index)">
                                                                                                        <a href=""
                                                                                                            style="text-decoration: none; color: black;">{{ward.WardName}}</a>
                                                                                                    </p>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    ng-model="order.address"
                                                                                                    placeholder="Địa chỉ chi tiết">
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div
                                                                                class="d-flex justify-content-center mt-3 mt-2">
                                                                                <div class="col-10">
                                                                                    <input type="text"
                                                                                        ng-model="nameProduct"
                                                                                        id="productOrder"
                                                                                        ng-focus="showAllProductWaitConfirm()"
                                                                                        data-bs-toggle="dropdown"
                                                                                        aria-expanded="false"
                                                                                        ng-change="searchProductWaitConfirm()"
                                                                                        class="form-control"
                                                                                        placeholder="Tìm kiếm sản phẩm...">

                                                                                    <div class="dropdown-menu"
                                                                                        aria-labelledby="productOrder"
                                                                                        style="width: 922px; height: 200px; overflow-y: scroll">
                                                                                        <div ng-show="products"
                                                                                            ng-repeat="product in products">
                                                                                            <div id="productDetail"
                                                                                                ng-repeat="productDetail in product.productDetails">
                                                                                                <p
                                                                                                    ng-click="chooseProductWaitConfirm(product, productDetail, $parent.$parent.$index)">
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">
                                                                                                        {{product.name}}
                                                                                                        -
                                                                                                        {{product.price
                                                                                                        |
                                                                                                        currency :
                                                                                                        "" : 0}}₫
                                                                                                    </a><br>
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">
                                                                                                        Size{{productDetail.size.name}}
                                                                                                        - Màu:
                                                                                                        {{productDetail.color.name}}
                                                                                                        - Độ cao đế:
                                                                                                        {{productDetail.height.height}}cm
                                                                                                        - Chất liệu:
                                                                                                        {{productDetail.material.name}}
                                                                                                    </a>
                                                                                                </p>
                                                                                                <hr>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <table class="mt-4 table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>STT</th>
                                                                                        <th>Sản phẩm</th>
                                                                                        <th>Size</th>
                                                                                        <th>Màu sắc</th>
                                                                                        <th>Giá tiền</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiền</th>
                                                                                        <th></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr
                                                                                        ng-repeat="orderDetail in order.orderDetails">
                                                                                        <td>{{$index + 1}}</td>
                                                                                        <td>
                                                                                            {{orderDetail.product.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.size.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.color.name}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price |
                                                                                            currency :
                                                                                            "" :
                                                                                            0}}₫

                                                                                        </td>
                                                                                        <td>
                                                                                            <div
                                                                                                class="d-flex justify-content-center align-center">
                                                                                                <input type="number"
                                                                                                    ng-change="changeQuantityWaitConfirm($parent.$index, $index)"
                                                                                                    class="col-2"
                                                                                                    ng-model="orderDetail.quantity"
                                                                                                    min="1"
                                                                                                    oninput="this.value = Math.abs(this.value)">
                                                                                            </div>
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price *
                                                                                            orderDetail.quantity |
                                                                                            currency
                                                                                            : "" :
                                                                                            0}}₫
                                                                                        </td>
                                                                                        <td>
                                                                                            <div class="row">
                                                                                                <h5
                                                                                                    class="col-auto mt-2">
                                                                                                    <a type="button"
                                                                                                        ng-click="a($index, $parent.$index)"
                                                                                                        class="ps-2"
                                                                                                        style="color: rgb(234, 55, 55);">
                                                                                                        <i
                                                                                                            class="bi bi-trash"></i>
                                                                                                    </a>
                                                                                                </h5>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div>
                                                                                <div class="d-flex justify-content-end">
                                                                                    <div>
                                                                                        <p>Giảm giá:
                                                                                            <b
                                                                                                ng-if="!order.voucher">0₫</b>
                                                                                            <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                | currency : "" :
                                                                                                0}}₫</b>
                                                                                        </p>
                                                                                        <p>Phí ship:
                                                                                            <b>+{{ order.totalShip |
                                                                                                currency: "" :
                                                                                                0 }}₫</b>
                                                                                        </p>
                                                                                        <h5>Tổng tiền: <b>{{
                                                                                                order.totalMoney |
                                                                                                currency : "" : 0}}₫</b>
                                                                                        </h5>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#updateOrderWaitConfirm{{$index}}">Cập
                                                                                nhật</button>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- Modal xác nhận update product -->
                                                            <div class="modal fade"
                                                                id="updateOrderWaitConfirm{{$index}}" tabindex="-1"
                                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            Thay đổi đơn hàng
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#update{{$index}}">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-dismiss="modal"
                                                                                ng-click="updateOrderWaitConfirm($index)">Thay
                                                                                đổi</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
                <!--Page-->
                <div>
                    <nav aria-label="Page navigation example" class="mt-3 offset-5">
                        <ul class="pagination pagination-sm">
                            <li ng-class="['page-item', {{ pageIndexWaitConfirm == 0 ? 'disabled' : '' }} ]">
                                <a class="page-link" aria-label="Previous" ng-click="prevWaitConfirm()">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li ng-class="['page-item', {{ pageIndexWaitConfirm == totalPage ? 'disabled' : '' }} ]">
                                <a class="page-link" aria-label="Next" ng-click="nextWaitConfirm()">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div class="d-flex justify-content-end" style="margin-top: -50px;">
                        <p style="background-color: rgb(228, 226, 226);">
                            {{pageIndexWaitConfirm + 1}}/{{countWaitConfirm}}
                        </p>
                    </div>
                </div>
        </div>
        <div class="tab-pane fade" id="confirmed" role="tabpanel" aria-labelledby="confirmed-tab">
            <div class="row mt-3">
                <h3 class="text-center mb-3"> <b> Đơn hàng đang chờ xử lý </b></h3>
                <div class="row">
                    <div class="col-12 col-sm-6 col-xl-3">
                        <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                            ng-focus="searchOrderConfirmed()" ng-model="orderCode" ng-keyup="searchOrderConfirmed()">
                    </div>
                    <div class="col-12 col-sm-6 col-xl-5">
                        <form class="d-flex">
                            <input class="form-control me-2" type="date" ng-model="beginDate"
                                ng-change="changeBeginDateConfirmed()">
                            <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                            <input class="form-control me-2" type="date" ng-model="endDate"
                                ng-change="changeEndDateConfirmed()">
                        </form>
                    </div>
                    <div class="col-12 col-sm-6 col-xl-2">
                        <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Giá tiền
                        </div>
                        <ul class="dropdown-menu" style="max-width: 244px;">
                            <li>
                                <select class="form-select dropdown-item filter"
                                    ng-change="findOrderByTotalMoneyConfirmed()" ng-model="findByTotal">
                                    <option selected disabled>Gợi ý</option>
                                    <option value="1">0 - 1,000,000</option>
                                    <option value="2">1,000,000 - 3,000,000</option>
                                    <option value="3">3,000,000 - 5,000,000</option>
                                </select>
                            </li>
                            <li>
                                <b class="ps-3">Tùy chỉnh</b>
                                <div class="mt-2">
                                    <div class="mt-2 ps-3 pe-3">
                                        <input type="number" class="form-control" placeholder="Từ"
                                            ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyConfirmed()"
                                            min="1" oninput="this.value = Math.abs(this.value)">
                                    </div>
                                    <div class="mt-2 ps-3 pe-3">
                                        <input type="number" class="form-control" placeholder="Đến"
                                            ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyConfirmed()"
                                            min="1" oninput="this.value = Math.abs(this.value)">
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-1">
                        <button ng-click="resetOrderConfirmed()" class="btn btn-primary">Reset</button>
                    </div>
                </div>
            </div>
            <div class="row mt-6">
                <div class="col-sm-12 col-md-12 mt-3">
                    <div class="row">
                        <div class="mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table id="example" class="table data-table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Mã ĐH</th>
                                                    <th>Mã GHN</th>
                                                    <th>Thời gian</th>
                                                    <th>Người tạo</th>
                                                    <!-- <th>Sản phẩm</th> -->
                                                    <th>Khách hàng</th>
                                                    <th>Địa chỉ</th>
                                                    <th>Tổng tiền</th>
                                                    <th>Thanh toán</th>
                                                    <th>Trạng thái</th>
                                                    <th>Thao tác</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <tr ng-repeat="order in orderconfirmeds">
                                                    <td>#{{order.code}}</td>
                                                    <td>{{order.codeGHN}}</td>
                                                    <td>{{order.createdDate | date:"dd/MM/yyyy ' - ' h:mma"}}</td>
                                                    <td>{{order.orderType != "ONLINE_WEB" ? order.createBy.username : ""
                                                        }}</td>
                                                    <td>
                                                        {{order.customerName}} <br>
                                                        SĐT: {{order.phone}}
                                                    </td>
                                                    <td>
                                                        {{order.address}} <br>
                                                        {{order.ward}}, {{order.district}}, {{order.province}}
                                                    </td>
                                                    <td>
                                                        {{order.totalMoney | currency : "" : 0}}₫
                                                    </td>
                                                    <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán online</td>
                                                    <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi nhận hàng
                                                    </td>
                                                    <td>
                                                        <span ng-if="order.status == 'CONFIRMED' ">Đang
                                                            chờ xử lý</span>
                                                    </td>
                                                    <td>
                                                        <div class="row">
                                                            <div class="col-1 pt-1">
                                                                <h5>
                                                                    <a href="#" data-bs-toggle="modal"
                                                                        data-bs-target="#confirmed{{$index}}"
                                                                        style="color: rgb(29, 201, 231);">
                                                                        <i class="bi bi-check2-square"></i>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div class="col-1 pt-1">
                                                                <h5>
                                                                    <a href="#" data-bs-toggle="modal"
                                                                        data-bs-target="#updateorderconfirmed{{$index}}"
                                                                        style="color: rgb(198, 198, 18);"
                                                                        ng-click="chosesOrderUpdateConfirmed($index)">
                                                                        <i class="bi bi-pencil-square"></i>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div class="col-1 pt-1">
                                                                <h5>
                                                                    <a href="#" type="button" data-bs-toggle="modal"
                                                                        data-bs-target="#deleteOrdered{{order.id}}"
                                                                        style="color: red ;">
                                                                        <i class="bi bi-x-circle"></i>
                                                                    </a>
                                                                    <!-- modal xóa đơn hàng -->
                                                                    <div class="modal fade"
                                                                        id="deleteOrdered{{order.id}}" tabindex="-1"
                                                                        aria-labelledby="exampleModalLabel"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog modal-dialog-centered">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    Xóa đơn hàng này
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-bs-dismiss="modal">Hủy</button>
                                                                                    <button type="button"
                                                                                        data-bs-dismiss="modal"
                                                                                        class="btn btn-danger"
                                                                                        ng-click="deleteOrder(order.id, $index)">Xóa</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </h5>
                                                            </div>
                                                        </div>

                                                        <!-- modal confirm -->
                                                        <div class="modal fade" id="confirmed{{$index}}" tabindex="-1"
                                                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-xl">
                                                                <div class="modal-content">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Xác nhận đơn hàng {{order.code}}
                                                                            </h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <!--table model-->
                                                                        <div class="modal-body">
                                                                            <div>
                                                                                Mã đơn hàng: <b> {{order.code}} </b> -
                                                                                Ngày tạo:
                                                                                <b>{{order.createdDate |
                                                                                    date:"dd/MM/yyyy ' - '
                                                                                    h:mma"}}</b>
                                                                                - {{order.paymentType == "VNPAY"?"Đã
                                                                                thanh toán
                                                                                online" : "Thanh toán khi nhận
                                                                                hàng"}}<br>
                                                                                Tên khách hàng:
                                                                                <b>{{order.customerName}} - SĐT:
                                                                                    {{order.phone}}</b> <br>
                                                                                Địa chỉ: <b>{{order.address}}
                                                                                    {{order.ward ? "
                                                                                    ," : ""}} {{order.ward}}
                                                                                    {{order.district ?
                                                                                    " ," : ""}} {{order.district}}
                                                                                    {{order.province ? " ," : ""}}
                                                                                    {{order.province}}</b> <br>
                                                                            </div>
                                                                            <table class="mt-4 table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>STT</th>
                                                                                        <th>Sản phẩm</th>
                                                                                        <th>Size</th>
                                                                                        <th>Màu sắc</th>
                                                                                        <th>Giá tiền</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiền</th>
                                                                                        <!-- <th>Thao tác</th> -->
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr
                                                                                        ng-repeat="orderDetail in order.orderDetails">
                                                                                        <td>{{$index + 1}}</td>
                                                                                        <td>
                                                                                            {{orderDetail.product.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.size.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.color.name}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price |
                                                                                            currency : ""
                                                                                            : 0}}₫

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.quantity}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price *
                                                                                            orderDetail.quantity |
                                                                                            currency : ""
                                                                                            : 0}}₫
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div>
                                                                                <div class="d-flex justify-content-end">
                                                                                    <div>
                                                                                        <p>Giảm giá:
                                                                                            <b
                                                                                                ng-if="!order.voucher">0₫</b>
                                                                                            <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                | currency : "" :
                                                                                                0}}₫</b>
                                                                                        </p>
                                                                                        <p>Phí ship:
                                                                                            <b>+{{ order.totalShip |
                                                                                                currency:
                                                                                                "" : 0 }}₫</b>
                                                                                        </p>
                                                                                        <h5>Tổng tiền: <b>{{
                                                                                                order.totalMoney |
                                                                                                currency : "" : 0}}₫</b>
                                                                                        </h5>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                            data-bs-dismiss="modal">Hủy</button>
                                                                        <button type="button" class="btn btn-primary"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#confirmProducted{{$index}}">Xác
                                                                            nhận</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Modal xác nhận confirm product -->
                                                        <div class="modal fade" id="confirmProducted{{$index}}"
                                                            tabindex="-1" aria-labelledby="exampleModalLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Bạn có chắn chắn muốn xác nhận đơn hàng này
                                                                        không?
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#confirmed{{$index}}">Hủy</button>
                                                                        <button type="button" class="btn btn-primary"
                                                                            data-bs-dismiss="modal"
                                                                            ng-click="confirmOrdered(order, $index)">Xác
                                                                            nhận</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- modal update -->
                                                        <div class="modal fade" id="updateorderconfirmed{{$index}}"
                                                            tabindex="-1" aria-labelledby="exampleModalLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog modal-xl">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="exampleModalLabel">
                                                                            Chi tiết đơn hàng: {{order.code}}
                                                                        </h5>
                                                                        <button type="button" class="btn-close"
                                                                            ng-click="cancelUpdate()"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                    </div>
                                                                    <!--table model-->
                                                                    <div class="modal-body row">
                                                                        <div class="">
                                                                            <div class="col-11">
                                                                                Mã đơn hàng: <b> {{order.code}} </b> -
                                                                                Ngày tạo:
                                                                                <b>{{order.createdDate}}</b> -
                                                                                {{order.paymentType == "VNPAY"?"Đã thanh
                                                                                toán
                                                                                online" : "Thanh toán khi nhận
                                                                                hàng"}}<br>

                                                                                <div class="row mt-3">
                                                                                    <div class="col-1">
                                                                                        <label for="">
                                                                                            <h2><i
                                                                                                    class="bi bi-person"></i>
                                                                                            </h2>
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-11">
                                                                                        <div class="row">
                                                                                            <div class="col-6">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    ng-model="order.customerName"
                                                                                                    placeholder="Tên người nhận">
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    ng-model="order.phone"
                                                                                                    placeholder="Số điện thoại">
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row mt-2"
                                                                                    ng-if="order.orderType == 'ONLINE' || order.orderType == 'ONLINE_WEB' ">
                                                                                    <div class="col-1">
                                                                                        <label for="">
                                                                                            <h2><i
                                                                                                    class="bi bi-geo-alt"></i>
                                                                                            </h2>
                                                                                        </label>
                                                                                    </div>
                                                                                    <div class="col-11">
                                                                                        <div class="row">
                                                                                            <div class="col-6">
                                                                                                <input
                                                                                                    class="form-control dropdown-toggle"
                                                                                                    type="text"
                                                                                                    id="orderProvince{{$index}}"
                                                                                                    ng-model="order.province"
                                                                                                    ng-focus="showProvince()"
                                                                                                    placeholder="Tỉnh, thành phố.."
                                                                                                    data-bs-toggle="dropdown"
                                                                                                    aria-expanded="false" />
                                                                                                <div class="dropdown-menu"
                                                                                                    aria-labelledby="orderProvince{{$index}}"
                                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                    <p id="province"
                                                                                                        ng-repeat="province in listProvince"
                                                                                                        ng-click="chooseProvince(province.ProvinceID, $parent.$index)">
                                                                                                        <a href=""
                                                                                                            style="text-decoration: none; color: black;">{{province.ProvinceName}}</a>
                                                                                                    </p>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <input
                                                                                                    class="form-control dropdown-toggle"
                                                                                                    type="text"
                                                                                                    id="orderDistrict{{$index}}"
                                                                                                    ng-model="order.district"
                                                                                                    ng-focus="showDistrict()"
                                                                                                    placeholder="Quận/Huyện..."
                                                                                                    data-bs-toggle="dropdown"
                                                                                                    aria-expanded="false" />
                                                                                                <div ng-show="order.province"
                                                                                                    class="dropdown-menu"
                                                                                                    aria-labelledby="orderDistrict{{$index}}"
                                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                    <p id="district"
                                                                                                        ng-repeat="district in listDistrict"
                                                                                                        ng-click="chooseDistrict(district.DistrictID, $parent.$index)">
                                                                                                        <a href=""
                                                                                                            style="text-decoration: none; color: black;">{{district.DistrictName}}</a>
                                                                                                    </p>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="row mt-2">
                                                                                            <div class="col-6">
                                                                                                <input
                                                                                                    class="form-control dropdown-toggle"
                                                                                                    type="text"
                                                                                                    id="orderWard{{$index}}"
                                                                                                    ng-model="order.ward"
                                                                                                    ng-focus="showWard()"
                                                                                                    placeholder="Phường, xã..."
                                                                                                    data-bs-toggle="dropdown"
                                                                                                    aria-expanded="false" />
                                                                                                <div ng-show="order.district"
                                                                                                    class="dropdown-menu"
                                                                                                    aria-labelledby="orderWard{{$index}}"
                                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                    <p id="ward"
                                                                                                        ng-repeat="ward in listWard"
                                                                                                        ng-click="chooseWard(ward.WardCode, $parent.$index)">
                                                                                                        <a href=""
                                                                                                            style="text-decoration: none; color: black;">{{ward.WardName}}</a>
                                                                                                    </p>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-6">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    ng-model="order.address"
                                                                                                    placeholder="Địa chỉ chi tiết">
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div
                                                                                class="d-flex justify-content-center mt-3 mt-2">
                                                                                <div class="col-10">
                                                                                    <input type="text"
                                                                                        ng-model="nameProduct"
                                                                                        id="productOrder"
                                                                                        ng-focus="showAllProductConfirmed()"
                                                                                        data-bs-toggle="dropdown"
                                                                                        aria-expanded="false"
                                                                                        ng-change="searchProductConfirmed()"
                                                                                        class="form-control"
                                                                                        placeholder="Tìm kiếm sản phẩm...">

                                                                                    <div class="dropdown-menu"
                                                                                        aria-labelledby="productOrder"
                                                                                        style="width: 922px; height: 200px; overflow-y: scroll">
                                                                                        <div ng-show="products"
                                                                                            ng-repeat="product in products">
                                                                                            <div id="productDetail"
                                                                                                ng-repeat="productDetail in product.productDetails">
                                                                                                <p
                                                                                                    ng-click="chooseProductConfirmed(product, productDetail, $parent.$parent.$index)">
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">
                                                                                                        {{product.name}}
                                                                                                        -
                                                                                                        {{product.price
                                                                                                        |
                                                                                                        currency : "" :
                                                                                                        0}}₫
                                                                                                    </a><br>
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">
                                                                                                        Size{{productDetail.size.name}}
                                                                                                        - Màu:
                                                                                                        {{productDetail.color.name}}
                                                                                                        - Độ cao đế:
                                                                                                        {{productDetail.height.height}}cm
                                                                                                        - Chất liệu:
                                                                                                        {{productDetail.material.name}}
                                                                                                    </a>
                                                                                                </p>
                                                                                                <hr>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <table class="mt-4 table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>STT</th>
                                                                                    <th>Sản phẩm</th>
                                                                                    <th>Size</th>
                                                                                    <th>Màu sắc</th>
                                                                                    <th>Giá tiền</th>
                                                                                    <th>Số lượng</th>
                                                                                    <th>Tổng tiền</th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    ng-repeat="orderDetail in order.orderDetails">
                                                                                    <td>{{$index + 1}}</td>
                                                                                    <td>
                                                                                        {{orderDetail.product.name}}
                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.productDetail.size.name}}
                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.productDetail.color.name}}

                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.price | currency :
                                                                                        "" :
                                                                                        0}}₫

                                                                                    </td>
                                                                                    <td>
                                                                                        <div
                                                                                            class="d-flex justify-content-center align-center">
                                                                                            <input type="number"
                                                                                                ng-change="changeQuantityConfirmed($parent.$index)"
                                                                                                class="col-2"
                                                                                                ng-model="orderDetail.quantity"
                                                                                                min="1"
                                                                                                oninput="this.value = Math.abs(this.value)">
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.price *
                                                                                        orderDetail.quantity | currency
                                                                                        : "" :
                                                                                        0}}₫
                                                                                    </td>
                                                                                    <td>
                                                                                        <div class="row">
                                                                                            <h5 class="col-auto mt-2">
                                                                                                <a type="button"
                                                                                                    type="button"
                                                                                                    data-bs-toggle="modal"
                                                                                                    data-bs-dismiss="modal"
                                                                                                    ng-click="chooseOrderDetail($index, $parent.$index)"
                                                                                                    data-bs-target="#deleteProduct{{$index}}"
                                                                                                    class="ps-2"
                                                                                                    style="color: rgb(234, 55, 55);">
                                                                                                    <i
                                                                                                        class="bi bi-trash"></i>
                                                                                                </a>
                                                                                            </h5>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div>
                                                                            <div class="d-flex justify-content-end">
                                                                                <div>
                                                                                    <p>Giảm giá:
                                                                                        <b ng-if="!order.voucher">0₫</b>
                                                                                        <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                            | currency : "" : 0}}₫</b>
                                                                                    </p>
                                                                                    <p>Phí ship:
                                                                                        <b>+{{ order.totalShip |
                                                                                            currency: "" :
                                                                                            0 }}₫</b>
                                                                                    </p>
                                                                                    <h5>Tổng tiền: <b>{{
                                                                                            order.totalMoney |
                                                                                            currency : "" : 0}}₫</b>
                                                                                    </h5>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                            data-bs-dismiss="modal"
                                                                            ng-click="cancelUpdate()">Hủy</button>
                                                                        <!-- <button type="button" ng-if="order.status == 'WAIT_FOR_CONFIRMATION' || order.status == 'CONFIRMED' || order.status == 'WAIT_FOR_THE_SHIPPER_TO_PICK_UP' " 
                                                                            class="btn btn-primary" data-bs-toggle="modal" data-bs-dismiss="modal" data-bs-target="#updateProduct{{$index}}">Cập nhật</button> -->
                                                                        <button type="button" class="btn btn-primary"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#updateProducted{{$index}}">Cập
                                                                            nhật</button>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Modal xác nhận update product -->
                                                        <div class="modal fade" id="updateProducted{{$index}}"
                                                            tabindex="-1" aria-labelledby="exampleModalLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Thay đổi đơn hàng
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#updateorderconfirmed{{$index}}">Hủy</button>
                                                                        <button type="button" class="btn btn-primary"
                                                                            data-bs-dismiss="modal"
                                                                            ng-click="updateOrderConfirmed($index)">Thay
                                                                            đổi</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Modal xác nhận xóa product -->
                                                        <div class="modal fade" id="deleteProduct{{$index}}"
                                                            tabindex="-1" aria-labelledby="exampleModalLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        Xóa sản phẩm trong đơn hàng, hành động không thể
                                                                        hoàn
                                                                        tác
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#updateorderconfirmed{{$index}}">Hủy</button>
                                                                        <button type="button" class="btn btn-danger"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#updateorderconfirmed{{$index}}"
                                                                            ng-click="aconfirmed()">Xóa</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <!--Page-->
            <div>
                <nav aria-label="Page navigation example" class="mt-3 offset-5">
                    <ul class="pagination pagination-sm">
                        <li ng-class="['page-item', {{ pageIndexConfirmed == 0 ? 'disabled' : '' }} ]">
                            <a href="" class="page-link" aria-label="Previous" ng-click="prevConfirmed()">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li ng-class="['page-item', {{ pageIndexConfirmed == totalPage ? 'disabled' : '' }} ]">
                            <a href="" class="page-link" aria-label="Next" ng-click="nextConfirmed()">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="d-flex justify-content-end" style="margin-top: -50px;">
                    <p style="background-color: rgb(228, 226, 226);">
                        {{pageIndexConfirmed + 1}}/{{countConfirmed}}
                    </p>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="waitfortheshippertopickup" role="tabpanel"
            aria-labelledby="waitfortheshippertopickup-tab">
            <div class="row mt-3">
                <h3 class="text-center mb-3"> <b> Đơn hàng chờ vận chuyển lấy hàng </b></h3>
                <div class="row">
                    <div class="col-12 col-sm-6 col-xl-3">
                        <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                            ng-focus="searchOrderWaitShipper()" ng-model="orderCode"
                            ng-keyup="searchOrderWaitShipper()">
                    </div>
                    <div class="col-12 col-sm-6 col-xl-5">
                        <form class="d-flex">
                            <input class="form-control me-2" type="date" ng-model="beginDate"
                                ng-change="changeBeginDateWaitShipper()">
                            <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                            <input class="form-control me-2" type="date" ng-model="endDate"
                                ng-change="changeEndDateWaitShipper()">
                        </form>
                    </div>
                    <div class="col-12 col-sm-6 col-xl-2">
                        <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Giá tiền
                        </div>
                        <ul class="dropdown-menu" style="max-width: 244px;">
                            <li>
                                <select class="form-select dropdown-item filter"
                                    ng-change="findOrderByTotalMoneyWaitShipper()" ng-model="findByTotal">
                                    <option selected disabled>Gợi ý</option>
                                    <option value="1">0 - 1,000,000</option>
                                    <option value="2">1,000,000 - 3,000,000</option>
                                    <option value="3">3,000,000 - 5,000,000</option>
                                </select>
                            </li>
                            <li>
                                <b class="ps-3">Tùy chỉnh</b>
                                <div class="mt-2">
                                    <div class="mt-2 ps-3 pe-3">
                                        <input type="number" class="form-control" placeholder="Từ"
                                            ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyWaitShipper()"
                                            min="1" oninput="this.value = Math.abs(this.value)">
                                    </div>
                                    <div class="mt-2 ps-3 pe-3">
                                        <input type="number" class="form-control" placeholder="Đến"
                                            ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyWaitShipper()"
                                            min="1" oninput="this.value = Math.abs(this.value)">
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-1">
                        <button ng-click="resetOrderWaitShipper()" class="btn btn-primary">Reset</button>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 mt-3">
                            <div class="row">
                                <div class="mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table id="example" class="table data-table table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>Mã ĐH</th>
                                                            <th>Mã GHN</th>
                                                            <th>Thời gian</th>
                                                            <th>Người tạo</th>
                                                            <th>Khách hàng</th>
                                                            <th>Địa chỉ</th>
                                                            <th>Tổng tiền</th>
                                                            <th>Thanh toán</th>
                                                            <th>Trạng thái</th>
                                                            <th>Thao tác</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="order in orderwaitshippers">
                                                            <td>{{order.code}}</td>
                                                            <td>{{order.codeGHN}}</td>
                                                            <td>{{order.createdDate}}</td>
                                                            <td>{{order.orderType != "ONLINE_WEB" ?
                                                                order.createBy.username : ""
                                                                }}</td>
                                                            <td>
                                                                {{order.customerName}} <br>
                                                                SĐT: {{order.phone}}
                                                            </td>
                                                            <td>
                                                                {{order.address}} <br>
                                                                {{order.ward}}, {{order.district}}, {{order.province}}
                                                            </td>
                                                            <td>
                                                                {{order.totalMoney | currency : "" : 0}}₫
                                                            </td>
                                                            <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán
                                                                online</td>
                                                            <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi
                                                                nhận hàng
                                                            </td>
                                                            <td>
                                                                <span
                                                                    ng-if="order.status == 'WAIT_FOR_THE_SHIPPER_TO_PICK_UP' ">
                                                                    Đang chờ vận chuyển lấy hàng</span>
                                                            </td>
                                                            <td>
                                                                <div class="row">
                                                                    <div class="col-1 pt-1">
                                                                        <h5>
                                                                            <a href="#" data-bs-toggle="modal"
                                                                                data-bs-target="#confirmwaitshipper{{$index}}"
                                                                                style="color: rgb(29, 201, 231);">
                                                                                <i class="bi bi-check2-square"></i>
                                                                            </a>
                                                                        </h5>
                                                                    </div>
                                                                    <div class="col-1 pt-1">
                                                                        <h5>
                                                                            <a href="#" data-bs-toggle="modal"
                                                                                data-bs-target="#updatewaitshipper{{$index}}"
                                                                                style="color: rgb(198, 198, 18);"
                                                                                ng-click="chosesOrderUpdateWaitShipper($index)">
                                                                                <i class="bi bi-pencil-square"></i>
                                                                            </a>
                                                                        </h5>
                                                                    </div>
                                                                    <div class="col-1 pt-1">
                                                                        <h5>
                                                                            <a href="#" type="button"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-target="#deleteOrder{{$index}}"
                                                                                style="color: red ;">
                                                                                <i class="bi bi-x-circle"></i>
                                                                            </a>
                                                                        </h5>
                                                                    </div>
                                                                </div>

                                                                <!-- modal xóa đơn hàng -->
                                                                <div class="modal fade"
                                                                id="deleteOrder{{$index}}"
                                                                tabindex="-1"
                                                                aria-labelledby="exampleModalLabel"
                                                                aria-hidden="true">
                                                                <div
                                                                    class="modal-dialog modal-xl">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Xóa đơn hàng {{order.code}}
                                                                            </h5>
                                                                            <button type="button"
                                                                                class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div>
                                                                                Mã đơn hàng: <b> {{order.code}}
                                                                                </b> -
                                                                                Ngày tạo:
                                                                                <b>{{order.createdDate |
                                                                                    date:"dd/MM/yyyy ' - '
                                                                                    h:mma"}}</b>
                                                                                - {{order.paymentType ==
                                                                                "VNPAY"?"Đã
                                                                                thanh toán
                                                                                online" : "Thanh toán khi nhận
                                                                                hàng"}}<br>
                                                                                Tên khách hàng:
                                                                                <b>{{order.customerName}} - SĐT:
                                                                                    {{order.phone}}</b> <br>
                                                                                Địa chỉ: <b>{{order.address}}
                                                                                    {{order.ward ? "
                                                                                    ," : ""}} {{order.ward}}
                                                                                    {{order.district ?
                                                                                    " ," : ""}}
                                                                                    {{order.district}}
                                                                                    {{order.province ? " ," :
                                                                                    ""}}
                                                                                    {{order.province}}</b> <br>
                                                                            </div>
                                                                            <table class="mt-4 table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>STT</th>
                                                                                        <th>Sản phẩm</th>
                                                                                        <th>Size</th>
                                                                                        <th>Màu sắc</th>
                                                                                        <th>Giá tiền</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiền</th>
                                                                                        <!-- <th>Thao tác</th> -->
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr
                                                                                        ng-repeat="orderDetail in order.orderDetails">
                                                                                        <td>{{$index + 1}}</td>
                                                                                        <td>
                                                                                            {{orderDetail.product.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.size.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.color.name}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price
                                                                                            |
                                                                                            currency : ""
                                                                                            : 0}}₫

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.quantity}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price
                                                                                            *
                                                                                            orderDetail.quantity
                                                                                            |
                                                                                            currency : ""
                                                                                            : 0}}₫
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div>
                                                                                <div
                                                                                    class="d-flex justify-content-end">
                                                                                    <div>
                                                                                        <p>Giảm giá:
                                                                                            <b
                                                                                                ng-if="!order.voucher">0₫</b>
                                                                                            <b
                                                                                                ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                | currency : ""
                                                                                                :
                                                                                                0}}₫</b>
                                                                                        </p>
                                                                                        <p>Phí ship:
                                                                                            <b>+{{
                                                                                                order.totalShip
                                                                                                |
                                                                                                currency:
                                                                                                "" : 0 }}₫</b>
                                                                                        </p>
                                                                                        <h5>Tổng tiền: <b>{{
                                                                                                order.totalMoney
                                                                                                |
                                                                                                currency : "" :
                                                                                                0}}₫</b>
                                                                                        </h5>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button"
                                                                                data-bs-dismiss="modal"
                                                                                class="btn btn-danger"
                                                                                ng-click="cancelOrder(order, $index)">Xóa</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                                <!-- modal confirm -->
                                                                <div class="modal fade"
                                                                    id="confirmwaitshipper{{$index}}" tabindex="-1"
                                                                    aria-labelledby="exampleModalLabel"
                                                                    aria-hidden="true">
                                                                    <div class="modal-dialog modal-xl">
                                                                        <div class="modal-content">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    
                                                                                    <h5 class="modal-title"
                                                                                        id="exampleModalLabel">
                                                                                        Xác nhận đơn hàng {{order.code}}
                                                                                    </h5>
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <!--table model-->
                                                                                <div class="modal-body">
                                                                                    <div>
                                                                                        Mã đơn hàng: <b> {{order.code}}
                                                                                        </b> -
                                                                                        Ngày tạo:
                                                                                        <b>{{order.createdDate |
                                                                                            date:"dd/MM/yyyy ' - '
                                                                                            h:mma"}}</b>
                                                                                        - {{order.paymentType ==
                                                                                        "VNPAY"?"Đã
                                                                                        thanh toán
                                                                                        online" : "Thanh toán khi nhận
                                                                                        hàng"}}<br>
                                                                                        Tên khách hàng:
                                                                                        <b>{{order.customerName}} - SĐT:
                                                                                            {{order.phone}}</b> <br>
                                                                                        Địa chỉ: <b>{{order.address}}
                                                                                            {{order.ward ? "
                                                                                            ," : ""}} {{order.ward}}
                                                                                            {{order.district ?
                                                                                            " ," : ""}}
                                                                                            {{order.district}}
                                                                                            {{order.province ? " ," :
                                                                                            ""}}
                                                                                            {{order.province}}</b> <br>
                                                                                    </div>
                                                                                    <table class="mt-4 table">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>STT</th>
                                                                                                <th>Sản phẩm</th>
                                                                                                <th>Size</th>
                                                                                                <th>Màu sắc</th>
                                                                                                <th>Giá tiền</th>
                                                                                                <th>Số lượng</th>
                                                                                                <th>Tổng tiền</th>
                                                                                                <!-- <th>Thao tác</th> -->
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            <tr
                                                                                                ng-repeat="orderDetail in order.orderDetails">
                                                                                                <td>{{$index + 1}}</td>
                                                                                                <td>
                                                                                                    {{orderDetail.product.name}}
                                                                                                </td>
                                                                                                <td>
                                                                                                    {{orderDetail.productDetail.size.name}}
                                                                                                </td>
                                                                                                <td>
                                                                                                    {{orderDetail.productDetail.color.name}}

                                                                                                </td>
                                                                                                <td>
                                                                                                    {{orderDetail.price
                                                                                                    |
                                                                                                    currency : ""
                                                                                                    : 0}}₫

                                                                                                </td>
                                                                                                <td>
                                                                                                    {{orderDetail.quantity}}

                                                                                                </td>
                                                                                                <td>
                                                                                                    {{orderDetail.price
                                                                                                    *
                                                                                                    orderDetail.quantity
                                                                                                    |
                                                                                                    currency : ""
                                                                                                    : 0}}₫
                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                    <div>
                                                                                        <div
                                                                                            class="d-flex justify-content-end">
                                                                                            <div>
                                                                                                <p>Giảm giá:
                                                                                                    <b
                                                                                                        ng-if="!order.voucher">0₫</b>
                                                                                                    <b
                                                                                                        ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                        | currency : ""
                                                                                                        :
                                                                                                        0}}₫</b>
                                                                                                </p>
                                                                                                <p>Phí ship:
                                                                                                    <b>+{{
                                                                                                        order.totalShip
                                                                                                        |
                                                                                                        currency:
                                                                                                        "" : 0 }}₫</b>
                                                                                                </p>
                                                                                                <h5>Tổng tiền: <b>{{
                                                                                                        order.totalMoney
                                                                                                        |
                                                                                                        currency : "" :
                                                                                                        0}}₫</b>
                                                                                                </h5>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Hủy</button>
                                                                                <button type="button"
                                                                                    class="btn btn-primary"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-dismiss="modal"
                                                                                    data-bs-target="#confirmshipper{{$index}}">Xác
                                                                                    nhận</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- Modal xác nhận confirm product -->
                                                                <div class="modal fade" id="confirmshipper{{$index}}"
                                                                    tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                    aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <button type="button" class="btn-close"
                                                                                    data-bs-dismiss="modal"
                                                                                    aria-label="Close"></button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                Bạn có chắn chắn muốn xác nhận đơn hàng
                                                                                này
                                                                                không?
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-dismiss="modal"
                                                                                    data-bs-target="#confirmwaitshipper{{$index}}">Hủy</button>
                                                                                <button type="button"
                                                                                    class="btn btn-primary"
                                                                                    data-bs-dismiss="modal"
                                                                                    ng-click="updateStatusOrderWaitShipper(order, $index)">Xác
                                                                                    nhận</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- modal update -->
                                                                <div class="modal fade" id="updatewaitshipper{{$index}}"
                                                                    tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                    aria-hidden="true">
                                                                    <div class="modal-dialog modal-xl">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalLabel">
                                                                                    Chi tiết đơn hàng: {{order.code}}
                                                                                </h5>
                                                                                <button type="button" class="btn-close"
                                                                                    ng-click="cancelUpdate()"
                                                                                    data-bs-dismiss="modal"
                                                                                    aria-label="Close"></button>
                                                                            </div>
                                                                            <!--table model-->
                                                                            <div class="modal-body row">
                                                                                <div class="">
                                                                                    <div class="col-11">
                                                                                        Mã đơn hàng: <b> {{order.code}}
                                                                                        </b> -
                                                                                        Ngày tạo:
                                                                                        <b>{{order.createdDate}}</b> -
                                                                                        {{order.paymentType ==
                                                                                        "VNPAY"?"Đã thanh
                                                                                        toán online" : "Thanh toán khi
                                                                                        nhận
                                                                                        hàng"}}<br>

                                                                                        <div class="row mt-3">
                                                                                            <div class="col-1">
                                                                                                <label for="">
                                                                                                    <h2><i
                                                                                                            class="bi bi-person"></i>
                                                                                                    </h2>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-11">
                                                                                                <div class="row">
                                                                                                    <div class="col-6">
                                                                                                        <input
                                                                                                            type="text"
                                                                                                            class="form-control"
                                                                                                            ng-model="order.customerName"
                                                                                                            placeholder="Tên người nhận">
                                                                                                    </div>
                                                                                                    <div class="col-6">
                                                                                                        <input
                                                                                                            type="text"
                                                                                                            class="form-control"
                                                                                                            ng-model="order.phone"
                                                                                                            placeholder="Số điện thoại">
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>

                                                                                        <div class="row mt-2"
                                                                                            ng-if="order.orderType == 'ONLINE' || order.orderType == 'ONLINE_WEB' ">
                                                                                            <div class="col-1">
                                                                                                <label for="">
                                                                                                    <h2><i
                                                                                                            class="bi bi-geo-alt"></i>
                                                                                                    </h2>
                                                                                                </label>
                                                                                            </div>
                                                                                            <div class="col-11">
                                                                                                <div class="row">
                                                                                                    <div class="col-6">
                                                                                                        <input
                                                                                                            class="form-control dropdown-toggle"
                                                                                                            type="text"
                                                                                                            id="orderProvince{{$index}}"
                                                                                                            ng-model="order.province"
                                                                                                            ng-focus="showProvince()"
                                                                                                            placeholder="Tỉnh, thành phố.."
                                                                                                            data-bs-toggle="dropdown"
                                                                                                            aria-expanded="false" />
                                                                                                        <div class="dropdown-menu"
                                                                                                            aria-labelledby="orderProvince{{$index}}"
                                                                                                            style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                            <p id="province"
                                                                                                                ng-repeat="province in listProvince"
                                                                                                                ng-click="chooseProvince(province.ProvinceID, $parent.$index)">
                                                                                                                <a href=""
                                                                                                                    style="text-decoration: none; color: black;">{{province.ProvinceName}}</a>
                                                                                                            </p>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-6">
                                                                                                        <input
                                                                                                            class="form-control dropdown-toggle"
                                                                                                            type="text"
                                                                                                            id="orderDistrict{{$index}}"
                                                                                                            ng-model="order.district"
                                                                                                            ng-focus="showDistrict()"
                                                                                                            placeholder="Quận/Huyện..."
                                                                                                            data-bs-toggle="dropdown"
                                                                                                            aria-expanded="false" />
                                                                                                        <div ng-show="order.province"
                                                                                                            class="dropdown-menu"
                                                                                                            aria-labelledby="orderDistrict{{$index}}"
                                                                                                            style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                            <p id="district"
                                                                                                                ng-repeat="district in listDistrict"
                                                                                                                ng-click="chooseDistrict(district.DistrictID, $parent.$index)">
                                                                                                                <a href=""
                                                                                                                    style="text-decoration: none; color: black;">{{district.DistrictName}}</a>
                                                                                                            </p>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="row mt-2">
                                                                                                    <div class="col-6">
                                                                                                        <input
                                                                                                            class="form-control dropdown-toggle"
                                                                                                            type="text"
                                                                                                            id="orderWard{{$index}}"
                                                                                                            ng-model="order.ward"
                                                                                                            ng-focus="showWard()"
                                                                                                            placeholder="Phường, xã..."
                                                                                                            data-bs-toggle="dropdown"
                                                                                                            aria-expanded="false" />
                                                                                                        <div ng-show="order.district"
                                                                                                            class="dropdown-menu"
                                                                                                            aria-labelledby="orderWard{{$index}}"
                                                                                                            style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                            <p id="ward"
                                                                                                                ng-repeat="ward in listWard"
                                                                                                                ng-click="chooseWard(ward.WardCode, $parent.$index)">
                                                                                                                <a href=""
                                                                                                                    style="text-decoration: none; color: black;">{{ward.WardName}}</a>
                                                                                                            </p>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-6">
                                                                                                        <input
                                                                                                            type="text"
                                                                                                            class="form-control"
                                                                                                            ng-model="order.address"
                                                                                                            placeholder="Địa chỉ chi tiết">
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div
                                                                                        class="d-flex justify-content-center mt-3 mt-2">
                                                                                        <div class="col-10">
                                                                                            <input type="text"
                                                                                                ng-model="nameProduct"
                                                                                                id="productOrder"
                                                                                                ng-focus="showAllProductWaitShipper()"
                                                                                                data-bs-toggle="dropdown"
                                                                                                aria-expanded="false"
                                                                                                ng-change="searchProductWaitShipper()"
                                                                                                class="form-control"
                                                                                                placeholder="Tìm kiếm sản phẩm...">

                                                                                            <div class="dropdown-menu"
                                                                                                aria-labelledby="productOrder"
                                                                                                style="width: 922px; height: 200px; overflow-y: scroll">
                                                                                                <div ng-show="products"
                                                                                                    ng-repeat="product in products">
                                                                                                    <div id="productDetail"
                                                                                                        ng-repeat="productDetail in product.productDetails">
                                                                                                        <p
                                                                                                            ng-click="chooseProductWaitShipper(product, productDetail, $parent.$parent.$index)">
                                                                                                            <a href=""
                                                                                                                style="text-decoration: none; color: black;">
                                                                                                                {{product.name}}
                                                                                                                -
                                                                                                                {{product.price
                                                                                                                |
                                                                                                                currency
                                                                                                                : ""
                                                                                                                : 0}}₫
                                                                                                            </a><br>
                                                                                                            <a href=""
                                                                                                                style="text-decoration: none; color: black;">
                                                                                                                Size{{productDetail.size.name}}
                                                                                                                - Màu:
                                                                                                                {{productDetail.color.name}}
                                                                                                                - Độ cao
                                                                                                                đế:
                                                                                                                {{productDetail.height.height}}cm
                                                                                                                - Chất
                                                                                                                liệu:
                                                                                                                {{productDetail.material.name}}
                                                                                                            </a>
                                                                                                        </p>
                                                                                                        <hr>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <table class="mt-4 table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th>STT</th>
                                                                                            <th>Sản phẩm</th>
                                                                                            <th>Size</th>
                                                                                            <th>Màu sắc</th>
                                                                                            <th>Giá tiền</th>
                                                                                            <th>Số lượng</th>
                                                                                            <th>Tổng tiền</th>
                                                                                            <th></th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr
                                                                                            ng-repeat="orderDetail in order.orderDetails">
                                                                                            <td>{{$index + 1}}</td>
                                                                                            <td>
                                                                                                {{orderDetail.product.name}}
                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.productDetail.size.name}}
                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.productDetail.color.name}}

                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.price |
                                                                                                currency :
                                                                                                "" : 0}}₫

                                                                                            </td>
                                                                                            <td>
                                                                                                <div
                                                                                                    class="d-flex justify-content-center align-center">
                                                                                                    <input type="number"
                                                                                                        ng-change="changeQuantityWaitShipper($parent.$index)"
                                                                                                        class="col-2"
                                                                                                        ng-model="orderDetail.quantity"
                                                                                                        min="1"
                                                                                                        oninput="this.value = Math.abs(this.value)">
                                                                                                </div>
                                                                                            </td>
                                                                                            <td>
                                                                                                {{orderDetail.price *
                                                                                                orderDetail.quantity |
                                                                                                currency
                                                                                                : "" : 0}}₫
                                                                                            </td>
                                                                                            <td>
                                                                                                <div class="row">
                                                                                                    <h5
                                                                                                        class="col-auto mt-2">
                                                                                                        <a type="button"
                                                                                                            ng-click="aWaitShipper($index, $parent.$index)"
                                                                                                            class="ps-2"
                                                                                                            style="color: rgb(234, 55, 55);">
                                                                                                            <i
                                                                                                                class="bi bi-trash"></i>
                                                                                                        </a>
                                                                                                    </h5>
                                                                                                </div>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <div>
                                                                                    <div
                                                                                        class="d-flex justify-content-end">
                                                                                        <div>
                                                                                            <p>Giảm giá:
                                                                                                <b
                                                                                                    ng-if="!order.voucher">0₫</b>
                                                                                                <b
                                                                                                    ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                    | currency : "" :
                                                                                                    0}}₫</b>
                                                                                            </p>
                                                                                            <p>Phí ship:
                                                                                                <b>+{{ order.totalShip |
                                                                                                    currency: "" : 0
                                                                                                    }}₫</b>
                                                                                            </p>
                                                                                            <h5>Tổng tiền: <b>{{
                                                                                                    order.totalMoney |
                                                                                                    currency
                                                                                                    : "" : 0}}₫</b></h5>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal"
                                                                                    ng-click="cancelUpdate()">Hủy</button>
                                                                                <!-- <button type="button" ng-if="order.status == 'WAIT_FOR_CONFIRMATION' || order.status == 'CONFIRMED' || order.status == 'WAIT_FOR_THE_SHIPPER_TO_PICK_UP' " 
                                                                                    class="btn btn-primary" data-bs-toggle="modal" data-bs-dismiss="modal" data-bs-target="#updateProduct{{$index}}">Cập nhật</button> -->
                                                                                <button type="button"
                                                                                    class="btn btn-primary"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-dismiss="modal"
                                                                                    data-bs-target="#updateProduct{{$index}}">Cập
                                                                                    nhật</button>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Modal xác nhận update product -->
                                                                <div class="modal fade" id="updateProduct{{$index}}"
                                                                    tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                    aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <button type="button" class="btn-close"
                                                                                    data-bs-dismiss="modal"
                                                                                    aria-label="Close"></button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                Thay đổi đơn hàng
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-dismiss="modal"
                                                                                    data-bs-target="#updatewaitshipper{{$index}}">Hủy</button>
                                                                                <button type="button"
                                                                                    class="btn btn-primary"
                                                                                    data-bs-dismiss="modal"
                                                                                    ng-click="updateOrderWaitShipper($index)">Thay
                                                                                    đổi</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <!--Page-->
            <div>
                <nav aria-label="Page navigation example" class="mt-3 offset-5">
                    <ul class="pagination pagination-sm">
                        <li ng-class="['page-item', {{ pageIndexWaitShipper == 0 ? 'disabled' : '' }} ]">
                            <a href="" class="page-link" aria-label="Previous" ng-click="prevWaitShipper()">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li ng-class="['page-item', {{ pageIndexWaitShipper == totalPage ? 'disabled' : '' }} ]">
                            <a href="" class="page-link" aria-label="Next" ng-click="nextWaitShipper()">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="d-flex justify-content-end" style="margin-top: -50px;">
                    <p style="background-color: rgb(228, 226, 226);">
                        {{pageIndexWaitShipper + 1}}/{{countWaitShipper}}
                    </p>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="delivering" role="tabpanel" aria-labelledby="delivering-tab">
            <div class="row mt-3">
                <h3 class="text-center mb-3"> <b> Đơn hàng đang giao </b></h3>
                <div class="row">
                    <div class="col-12 col-sm-6 col-xl-3">
                        <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                            ng-focus="searchOrderDelivering()" ng-model="orderCode" ng-keyup="searchOrderDelivering()">
                    </div>
                    <div class="col-12 col-sm-6 col-xl-5">
                        <form class="d-flex">
                            <input class="form-control me-2" type="date" ng-model="beginDate"
                                ng-change="changeBeginDateDelivering()">
                            <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                            <input class="form-control me-2" type="date" ng-model="endDate"
                                ng-change="changeEndDateDelivering()">
                        </form>
                    </div>
                    <div class="col-12 col-sm-6 col-xl-2">
                        <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Giá tiền
                        </div>
                        <ul class="dropdown-menu" style="max-width: 244px;">
                            <li>
                                <select class="form-select dropdown-item filter"
                                    ng-change="findOrderByTotalMoneyDelivering()" ng-model="findByTotal">
                                    <option selected disabled>Gợi ý</option>
                                    <option value="1">0 - 1,000,000</option>
                                    <option value="2">1,000,000 - 3,000,000</option>
                                    <option value="3">3,000,000 - 5,000,000</option>
                                </select>
                            </li>
                            <li>
                                <b class="ps-3">Tùy chỉnh</b>
                                <div class="mt-2">
                                    <div class="mt-2 ps-3 pe-3">
                                        <input type="number" class="form-control" placeholder="Từ"
                                            ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyDelivering()"
                                            min="1" oninput="this.value = Math.abs(this.value)">
                                    </div>
                                    <div class="mt-2 ps-3 pe-3">
                                        <input type="number" class="form-control" placeholder="Đến"
                                            ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyDelivering()"
                                            min="1" oninput="this.value = Math.abs(this.value)">
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-1">
                        <button ng-click="resetOrderDelivering()" class="btn btn-primary">Reset</button>
                    </div>
                </div>
            </div>
            <div class="row mt-6">
                <div class="col-sm-12 col-md-12">
                    <div class="row mt-3">
                        <div class="mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table id="example" class="table data-table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Mã ĐH</th>
                                                    <th>Mã GHN</th>
                                                    <th>Người tạo</th>
                                                    <th>Khách hàng</th>
                                                    <th>Địa chỉ</th>
                                                    <th>Tổng tiền</th>
                                                    <th>Thanh toán</th>
                                                    <th>Trạng thái</th>
                                                    <th>Thao tác</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <tr ng-repeat="order in orderDelivering">
                                                    <td>#{{order.code}}</td>
                                                    <td>{{order.codeGHN}}</td>
                                                    <td>
                                                        {{order.orderType != "ONLINE_WEB" ? order.createBy.username : ""
                                                        }}
                                                    </td>
                                                    <td>
                                                        {{order.customerName}} <br>
                                                        SĐT: {{order.phone}}
                                                    </td>
                                                    <td>
                                                        {{order.address}} <br>
                                                        {{order.ward}}, {{order.district}}, {{order.province}}
                                                    </td>
                                                    <td>
                                                        {{order.totalMoney | currency : "" : 0}}₫
                                                    </td>
                                                    <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán online</td>
                                                    <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi nhận hàng
                                                    </td>
                                                    <td>
                                                        <span ng-if="order.status == 'DELIVERING' ">
                                                            Đơn đang giao hàng</span>
                                                    </td>
                                                    <td>
                                                        <div class="row">
                                                            <div class="col-1 pt-1">
                                                                <h5>
                                                                    <a href="#" data-bs-toggle="modal"
                                                                        data-bs-target="#confirmDelivering{{$index}}"
                                                                        style="color: rgb(29, 201, 231);">
                                                                        <i class="bi bi-check2-square"></i>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div class="col-1 pt-1">
                                                                <h5>
                                                                    <a href="#" data-bs-toggle="modal"
                                                                        data-bs-target="#showDelivering{{$index}}"
                                                                        style="color: rgb(8, 159, 41);">
                                                                        <i class="bi bi-eye"></i>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div class="col-1 pt-1">
                                                                <h5>
                                                                    <a href="#" type="button" data-bs-toggle="modal"
                                                                        data-bs-target="#nodeliveryOrder{{$index}}"
                                                                        style="color: red ;">
                                                                        <i class="bi bi-x-circle"></i>
                                                                    </a>
                                                                    <!-- modal xóa đơn hàng -->
                                                                    <div class="modal fade" id="nodeliveryOrder{{$index}}"
                                                                        tabindex="-1"
                                                                        aria-labelledby="exampleModalLabel"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog modal-dialog-centered">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    Xác nhận không giao được đơn hàng
                                                                                    này
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-bs-dismiss="modal">Hủy</button>
                                                                                    <button type="button"
                                                                                        data-bs-dismiss="modal"
                                                                                        class="btn btn-danger"
                                                                                        ng-click="noDeliveryOrder(order, $index)">Xác
                                                                                        nhận</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </h5>
                                                            </div>
                                                        </div>

                                                        <!-- modal confirm -->
                                                        <div class="modal fade" id="confirmDelivering{{$index}}"
                                                            tabindex="-1" aria-labelledby="exampleModalLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog modal-xl">
                                                                <div class="modal-content">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Xác nhận đơn hàng {{order.code}}
                                                                            </h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <!--table model-->
                                                                        <div class="modal-body">
                                                                            <div>
                                                                                Mã đơn hàng: <b> {{order.code}} </b> -
                                                                                Ngày tạo:
                                                                                <b>{{order.createdDate |
                                                                                    date:"dd/MM/yyyy ' - '
                                                                                    h:mma"}}</b>
                                                                                - {{order.paymentType == "VNPAY"?"Đã
                                                                                thanh toán
                                                                                online" : "Thanh toán khi nhận
                                                                                hàng"}}<br>
                                                                                Tên khách hàng:
                                                                                <b>{{order.customerName}} - SĐT:
                                                                                    {{order.phone}}</b> <br>
                                                                                Địa chỉ: <b>{{order.address}}
                                                                                    {{order.ward ? "
                                                                                    ," : ""}} {{order.ward}}
                                                                                    {{order.district ?
                                                                                    " ," : ""}} {{order.district}}
                                                                                    {{order.province ? " ," : ""}}
                                                                                    {{order.province}}</b> <br>
                                                                            </div>
                                                                            <table class="mt-4 table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>STT</th>
                                                                                        <th>Sản phẩm</th>
                                                                                        <th>Size</th>
                                                                                        <th>Màu sắc</th>
                                                                                        <th>Giá tiền</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiền</th>
                                                                                        <!-- <th>Thao tác</th> -->
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr
                                                                                        ng-repeat="orderDetail in order.orderDetails">
                                                                                        <td>{{$index + 1}}</td>
                                                                                        <td>
                                                                                            {{orderDetail.product.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.size.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.color.name}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price |
                                                                                            currency : ""
                                                                                            : 0}}₫

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.quantity}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price *
                                                                                            orderDetail.quantity |
                                                                                            currency : ""
                                                                                            : 0}}₫
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div>
                                                                                <div class="d-flex justify-content-end">
                                                                                    <div>
                                                                                        <p>Giảm giá:
                                                                                            <b
                                                                                                ng-if="!order.voucher">0₫</b>
                                                                                            <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                                | currency : "" :
                                                                                                0}}₫</b>
                                                                                        </p>
                                                                                        <p>Phí ship:
                                                                                            <b>+{{ order.totalShip |
                                                                                                currency:
                                                                                                "" : 0 }}₫</b>
                                                                                        </p>
                                                                                        <h5>Tổng tiền: <b>{{
                                                                                                order.totalMoney |
                                                                                                currency : "" : 0}}₫</b>
                                                                                        </h5>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button" class="btn btn-primary"
                                                                                data-bs-toggle="modal" data-bs-dismiss="modal"
                                                                                data-bs-target="#confirmProductDelivering{{$index}}">Xác
                                                                                nhận</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                    </div>

                                    <!-- Modal xác nhận confirm product -->
                                    <div class="modal fade" id="confirmProductDelivering{{$index}}" tabindex="-1"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Bạn có chắn chắn muốn xác nhận đơn hàng này
                                                    không?
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-toggle="modal" data-bs-dismiss="modal"
                                                        data-bs-target="#confirmDelivering{{$index}}">Hủy</button>
                                                    <button type="button" class="btn btn-primary"
                                                        data-bs-dismiss="modal"
                                                        ng-click="updateStatusOrderDelivering(order, $index)">Xác
                                                        nhận</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- modal show order -->
                                    <div class="modal fade" id="showDelivering{{$index}}" tabindex="-1"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-xl">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel">
                                                        Chi tiết đơn hàng: {{order.code}}
                                                    </h5>
                                                    <button type="button" class="btn-close" ng-click="cancelUpdate()"
                                                        data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <!--table model-->
                                                <div class="modal-body row">
                                                    <div class="">
                                                        <div class="col-11">
                                                            Mã đơn hàng: <b> {{order.code}} </b> - Ngày tạo:
                                                            <b>{{order.createdDate}}</b> - {{order.paymentType ==
                                                            "VNPAY"?"Đã thanh toán online" : "Thanh toán khi nhận
                                                            hàng"}}<br>

                                                            <div class="row mt-3">
                                                                <div class="col-1">
                                                                    <label for="">
                                                                        <h2><i class="bi bi-person"></i></h2>
                                                                    </label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <input type="text" class="form-control"
                                                                                ng-model="order.customerName"
                                                                                placeholder="Tên người nhận" readonly>
                                                                        </div>
                                                                        <div class="col-6">
                                                                            <input type="text" class="form-control"
                                                                                ng-model="order.phone"
                                                                                placeholder="Số điện thoại" readonly>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="row mt-2"
                                                                ng-if="order.orderType == 'ONLINE' || order.orderType == 'ONLINE_WEB' ">
                                                                <div class="col-1">
                                                                    <label for="">
                                                                        <h2><i class="bi bi-geo-alt"></i></h2>
                                                                    </label>
                                                                </div>
                                                                <div class="col-11">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <input class="form-control dropdown-toggle"
                                                                                type="text" id="orderProvince{{$index}}"
                                                                                ng-model="order.province" readonly
                                                                                ng-focus="showProvince()"
                                                                                placeholder="Tỉnh, thành phố.."
                                                                                data-bs-toggle="dropdown"
                                                                                aria-expanded="false" />
                                                                            <div class="dropdown-menu"
                                                                                aria-labelledby="orderProvince{{$index}}"
                                                                                style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                <p id="province"
                                                                                    ng-repeat="province in listProvince"
                                                                                    ng-click="chooseProvince(province.ProvinceID, $parent.$index)">
                                                                                    <a href=""
                                                                                        style="text-decoration: none; color: black;">{{province.ProvinceName}}</a>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-6">
                                                                            <input class="form-control dropdown-toggle"
                                                                                type="text" id="orderDistrict{{$index}}"
                                                                                ng-model="order.district" readonly
                                                                                ng-focus="showDistrict()"
                                                                                placeholder="Quận/Huyện..."
                                                                                data-bs-toggle="dropdown"
                                                                                aria-expanded="false" />
                                                                            <div ng-show="order.province"
                                                                                class="dropdown-menu"
                                                                                aria-labelledby="orderDistrict{{$index}}"
                                                                                style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                <p id="district"
                                                                                    ng-repeat="district in listDistrict"
                                                                                    ng-click="chooseDistrict(district.DistrictID, $parent.$index)">
                                                                                    <a href=""
                                                                                        style="text-decoration: none; color: black;">{{district.DistrictName}}</a>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row mt-2">
                                                                        <div class="col-6">
                                                                            <input class="form-control dropdown-toggle"
                                                                                type="text" id="orderWard{{$index}}"
                                                                                ng-model="order.ward" readonly
                                                                                ng-focus="showWard()"
                                                                                placeholder="Phường, xã..."
                                                                                data-bs-toggle="dropdown"
                                                                                aria-expanded="false" />
                                                                            <div ng-show="order.district"
                                                                                class="dropdown-menu"
                                                                                aria-labelledby="orderWard{{$index}}"
                                                                                style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                <p id="ward"
                                                                                    ng-repeat="ward in listWard"
                                                                                    ng-click="chooseWard(ward.WardCode, $parent.$index)">
                                                                                    <a href=""
                                                                                        style="text-decoration: none; color: black;">{{ward.WardName}}</a>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-6">
                                                                            <input type="text" class="form-control"
                                                                                ng-model="order.address"
                                                                                placeholder="Địa chỉ chi tiết" readonly>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-3">
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-content-center mt-3 mt-2">
                                                            <div class="col-10">
                                                                <div class="dropdown-menu"
                                                                    aria-labelledby="productOrder"
                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                    <div ng-show="products"
                                                                        ng-repeat="product in products">
                                                                        <div id="productDetail"
                                                                            ng-repeat="productDetail in product.productDetails">
                                                                            <p
                                                                                ng-click="chooseProduct(product, productDetail, $parent.$parent.$index)">
                                                                                <a href=""
                                                                                    style="text-decoration: none; color: black;">
                                                                                    {{product.name}} - {{product.price |
                                                                                    currency : "" : 0}}₫
                                                                                </a><br>
                                                                                <a href=""
                                                                                    style="text-decoration: none; color: black;">
                                                                                    Size{{productDetail.size.name}} -
                                                                                    Màu: {{productDetail.color.name}} -
                                                                                    Độ cao đế:
                                                                                    {{productDetail.height.height}}cm -
                                                                                    Chất liệu:
                                                                                    {{productDetail.material.name}}
                                                                                </a>
                                                                            </p>
                                                                            <hr>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <table class="mt-4 table">
                                                        <thead>
                                                            <tr>
                                                                <th>STT</th>
                                                                <th>Sản phẩm</th>
                                                                <th>Size</th>
                                                                <th>Màu sắc</th>
                                                                <th>Giá tiền</th>
                                                                <th>Số lượng</th>
                                                                <th>Tổng tiền</th>
                                                                <!-- <th></th> -->
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="orderDetail in order.orderDetails">
                                                                <td>{{$index + 1}}</td>
                                                                <td>
                                                                    {{orderDetail.product.name}}
                                                                </td>
                                                                <td>
                                                                    {{orderDetail.productDetail.size.name}}
                                                                </td>
                                                                <td>
                                                                    {{orderDetail.productDetail.color.name}}

                                                                </td>
                                                                <td>
                                                                    {{orderDetail.price | currency : "" : 0}}₫

                                                                </td>
                                                                <td>
                                                                    {{orderDetail.quantity}}
                                                                </td>
                                                                <td>
                                                                    {{orderDetail.price * orderDetail.quantity |
                                                                    currency : "" : 0}}₫
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div>
                                                        <div class="d-flex justify-content-end">
                                                            <div>
                                                                <p>Giảm giá:
                                                                    <b ng-if="!order.voucher">0₫</b>
                                                                    <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                        | currency : "" : 0}}₫</b>
                                                                </p>
                                                                <p>Phí ship:
                                                                    <b>+{{ order.totalShip | currency: "" : 0 }}₫</b>
                                                                </p>
                                                                <h5>Tổng tiền: <b>{{ order.totalMoney | currency : "" :
                                                                        0}}₫</b></h5>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal">Đóng</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </td>
                                    </tr>
                                    </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Page-->
            <div>
                <nav aria-label="Page navigation example" class="mt-3 offset-5">
                    <ul class="pagination pagination-sm">
                        <li ng-class="['page-item', {{ pageIndexDelivering == 0 ? 'disabled' : '' }} ]">
                            <a href="" class="page-link" aria-label="Previous" ng-click="prevDelivering()">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li ng-class="['page-item', {{ pageIndexDelivering == totalPage ? 'disabled' : '' }} ]">
                            <a href="" class="page-link" aria-label="Next" ng-click="nextDelivering()">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="d-flex justify-content-end" style="margin-top: -50px;">
                    <p style="background-color: rgb(228, 226, 226);">
                        {{pageIndexDelivering + 1}}/{{countDelivering}}
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="delivered" role="tabpanel" aria-labelledby="delivered-tab">
        <div class="row mt-3">
            <h3 class="text-center mb-3"> <b> Đơn hàng đã giao thành công</b></h3>
            <div class="row">
                <div class="col-12 col-sm-6 col-xl-3">
                    <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                        ng-focus="searchOrderDelivered()" ng-model="orderCode" ng-keyup="searchOrderDelivered()">
                </div>
                <div class="col-12 col-sm-6 col-xl-5">
                    <form class="d-flex">
                        <input class="form-control me-2" type="date" ng-model="beginDate"
                            ng-change="changeBeginDateDelivered()">
                        <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                        <input class="form-control me-2" type="date" ng-model="endDate"
                            ng-change="changeEndDateDelivered()">
                    </form>
                </div>
                <div class="col-12 col-sm-6 col-xl-2">
                    <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Giá tiền
                    </div>
                    <ul class="dropdown-menu" style="max-width: 244px;">
                        <li>
                            <select class="form-select dropdown-item filter"
                                ng-change="findOrderByTotalMoneyDelivered()" ng-model="findByTotal">
                                <option selected disabled>Gợi ý</option>
                                <option value="1">0 - 1,000,000</option>
                                <option value="2">1,000,000 - 3,000,000</option>
                                <option value="3">3,000,000 - 5,000,000</option>
                            </select>
                        </li>
                        <li>
                            <b class="ps-3">Tùy chỉnh</b>
                            <div class="mt-2">
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Từ"
                                        ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyDelivered()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Đến"
                                        ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyDelivered()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-1">
                    <button ng-click="resetOrderDelivered()" class="btn btn-primary">Reset</button>
                </div>
            </div>
        </div>
        <div class="row mt-6">
            <div class="col-sm-12 col-md-12">
                <div class="row mt-3">
                    <div class="mb-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table id="example" class="table data-table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Mã ĐH</th>
                                                <th>Mã GHN</th>
                                                <th>Người tạo</th>
                                                <th>Khách hàng</th>
                                                <th>Địa chỉ</th>
                                                <th>Tổng tiền</th>
                                                <th>Thanh toán</th>
                                                <th>Trạng thái</th>
                                                <th>Thao tác</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr ng-repeat="order in orderDelivered">
                                                <td>#{{order.code}}</td>
                                                <td>{{order.codeGHN}}</td>
                                                <td>
                                                    {{order.orderType != "ONLINE_WEB" ? order.createBy.username : "" }}
                                                </td>
                                                <td>
                                                    {{order.customerName}} <br>
                                                    SĐT: {{order.phone}}
                                                </td>
                                                <td>
                                                    {{order.address}} <br>
                                                    {{order.ward}} {{order.district ? " ," : ""}} {{order.district}}
                                                    {{order.province ? " ," : ""}} {{order.province}}
                                                </td>
                                                <td>
                                                    {{order.totalMoney | currency : "" : 0}}₫
                                                </td>
                                                <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán online</td>
                                                <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi nhận hàng</td>
                                                <td>
                                                    <span ng-if="order.status == 'DELIVERED' ">
                                                        Đơn đã giao thành công</span>
                                                </td>
                                                <td>
                                                    <div class="row">
                                                        <div class="col-auto pt-1">
                                                            <h4>
                                                                <a href="#" style="color: rgb(8, 159, 41);"
                                                                    ng-click="chosesOrderUpdate($index)"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#detailModalDelivered{{$index}}">
                                                                    <i class="bi bi-eye"></i>
                                                                </a>
                                                            </h4>
                                                        </div>
                                                    </div>
                                                    <!-- Modal chi tiet đơn hang: -->
                                                    <div class="modal fade" id="detailModalDelivered{{$index}}"
                                                        tabindex="-1" aria-labelledby="exampleModalLabel"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog modal-xl">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">
                                                                        Chi tiết đơn hàng: {{order.code}}
                                                                    </h5>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <!--table model-->
                                                                <div class="modal-body">
                                                                    <div>
                                                                        Mã đơn hàng: <b> {{order.code}} </b> - Ngày tạo:
                                                                        <b>{{order.createdDate | date:"dd/MM/yyyy ' - '
                                                                            h:mma"}}</b>
                                                                        - {{order.paymentType == "VNPAY"?"Đã thanh toán
                                                                        online" : "Thanh toán khi nhận hàng"}}<br>
                                                                        Tên khách hàng: <b>{{order.customerName}} - SĐT:
                                                                            {{order.phone}}</b> <br>
                                                                        Địa chỉ: <b>{{order.address}} {{order.ward ? "
                                                                            ," : ""}} {{order.ward}} {{order.district ?
                                                                            " ," : ""}} {{order.district}}
                                                                            {{order.province ? " ," : ""}}
                                                                            {{order.province}}</b> <br>
                                                                    </div>
                                                                    <table class="mt-4 table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>STT</th>
                                                                                <th>Sản phẩm</th>
                                                                                <th>Size</th>
                                                                                <th>Màu sắc</th>
                                                                                <th>Giá tiền</th>
                                                                                <th>Số lượng</th>
                                                                                <th>Tổng tiền</th>
                                                                                <!-- <th>Thao tác</th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                ng-repeat="orderDetail in order.orderDetails">
                                                                                <td>{{$index + 1}}</td>
                                                                                <td>
                                                                                    {{orderDetail.product.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.size.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.color.name}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price | currency : ""
                                                                                    : 0}}₫

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.quantity}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price *
                                                                                    orderDetail.quantity | currency : ""
                                                                                    : 0}}₫
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <div>
                                                                        <div class="d-flex justify-content-end">
                                                                            <div>
                                                                                <p>Giảm giá:
                                                                                    <b ng-if="!order.voucher">0₫</b>
                                                                                    <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                        | currency : "" : 0}}₫</b>
                                                                                </p>
                                                                                <p>Phí ship:
                                                                                    <b>+{{ order.totalShip | currency:
                                                                                        "" : 0 }}₫</b>
                                                                                </p>
                                                                                <h5>Tổng tiền: <b>{{ order.totalMoney |
                                                                                        currency : "" : 0}}₫</b></h5>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Page-->
        <div>
            <nav aria-label="Page navigation example" class="mt-3 offset-5">
                <ul class="pagination pagination-sm">
                    <li ng-class="['page-item', {{ pageIndexDelivered == 0 ? 'disabled' : '' }} ]">
                        <a href="" class="page-link" aria-label="Previous" ng-click="prevDelivered()">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li ng-class="['page-item', {{ pageIndexDelivered == totalPage ? 'disabled' : '' }} ]">
                        <a href="" class="page-link" aria-label="Next" ng-click="nextDelivered()">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="d-flex justify-content-end" style="margin-top: -50px;">
                <p style="background-color: rgb(228, 226, 226);">
                    {{pageIndexDelivered + 1}}/{{countDelivered}}
                </p>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="nodelivery" role="tabpanel" aria-labelledby="nodelivery-tab">
        <div class="row mt-3">
            <h3 class="text-center mb-3"> <b> Đơn hàng không giao được</b></h3>
            <div class="row">
                <div class="col-12 col-sm-6 col-xl-3">
                    <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                        ng-focus="searchOrderNoDelivery()" ng-model="orderCode" ng-keyup="searchOrderNoDelivery()">
                </div>
                <div class="col-12 col-sm-6 col-xl-5">
                    <form class="d-flex">
                        <input class="form-control me-2" type="date" ng-model="beginDate"
                            ng-change="changeBeginDateNoDelivery()">
                        <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                        <input class="form-control me-2" type="date" ng-model="endDate"
                            ng-change="changeEndDateNoDelivery()">
                    </form>
                </div>
                <div class="col-12 col-sm-6 col-xl-2">
                    <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Giá tiền
                    </div>
                    <ul class="dropdown-menu" style="max-width: 244px;">
                        <li>
                            <select class="form-select dropdown-item filter"
                                ng-change="findOrderByTotalMoneyNoDelivery()" ng-model="findByTotal">
                                <option selected disabled>Gợi ý</option>
                                <option value="1">0 - 1,000,000</option>
                                <option value="2">1,000,000 - 3,000,000</option>
                                <option value="3">3,000,000 - 5,000,000</option>
                            </select>
                        </li>
                        <li>
                            <b class="ps-3">Tùy chỉnh</b>
                            <div class="mt-2">
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Từ"
                                        ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyNoDelivery()"
                                        min="1" oninput="this.value = Math.abs(this.value)">
                                </div>
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Đến"
                                        ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyNoDelivery()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-1">
                    <button ng-click="resetOrderNoDelivery()" class="btn btn-primary">Reset</button>
                </div>
            </div>
        </div>
        <div class="row mt-6">
            <div class="col-sm-12 col-md-12">
                <div class="row mt-3">
                    <div class="mb-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table id="example" class="table data-table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Mã ĐH</th>
                                                <th>Mã GHN</th>
                                                <th>Người tạo</th>
                                                <th>Khách hàng</th>
                                                <th>Địa chỉ</th>
                                                <th>Tổng tiền</th>
                                                <th>Thanh toán</th>
                                                <th>Trạng thái</th>
                                                <th>Thao tác</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="order in orderNoDelivery">
                                                <td>#{{order.code}}</td>
                                                <td>{{order.codeGHN}}</td>
                                                <td>
                                                    {{order.orderType != "ONLINE_WEB" ? order.createBy.username : "" }}
                                                </td>
                                                <td>
                                                    {{order.customerName}} <br>
                                                    SĐT: {{order.phone}}
                                                </td>
                                                <td>
                                                    {{order.address}} <br>
                                                    {{order.ward}}, {{order.district}}, {{order.province}}
                                                </td>
                                                <td>
                                                    {{order.totalMoney | currency : "" : 0 }}₫
                                                </td>
                                                <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán online</td>
                                                <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi nhận hàng</td>
                                                <td>
                                                    <span ng-if="order.status == 'NO_DELIVERY' ">
                                                        Đơn không giao được</span>
                                                </td>
                                                <td>
                                                    <div class="row">
                                                        <div class="col-1 pt-1">
                                                            <h5>
                                                                <a href="#" data-bs-toggle="modal"
                                                                    data-bs-target="#rollbackNoDelivery{{$index}}"
                                                                    style="color: rgb(29, 201, 231);">
                                                                    <i class="bi bi-pencil-square"></i>
                                                                </a>
                                                            </h5>
                                                        </div>
                                                        <div class="col-auto pt-1">
                                                            <h5>
                                                                <a href="#" style="color: rgb(8, 159, 41);"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#detailModalNoDelivery{{$index}}">
                                                                    <i class="bi bi-eye"></i>
                                                                </a>
                                                            </h5>
                                                        </div>
                                                    </div>
                                                    <!-- modal rollback order no delivery -->
                                                    <div class="modal fade" id="rollbackNoDelivery{{$index}}"
                                                        tabindex="-1" aria-labelledby="exampleModalLabel"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog modal-xl">
                                                            <div class="modal-content">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="exampleModalLabel">
                                                                            Xác nhận chuyển đơn hàng {{order.code}} về
                                                                            đang chờ shipper
                                                                        </h5>
                                                                        <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                    </div>
                                                                    <!--table model-->
                                                                    <div class="modal-body">
                                                                        <div>
                                                                            Mã đơn hàng: <b> {{order.code}} </b> -
                                                                            Ngày tạo:
                                                                            <b>{{order.createdDate |
                                                                                date:"dd/MM/yyyy ' - '
                                                                                h:mma"}}</b>
                                                                            - {{order.paymentType == "VNPAY"?"Đã
                                                                            thanh toán
                                                                            online" : "Thanh toán khi nhận
                                                                            hàng"}}<br>
                                                                            Tên khách hàng:
                                                                            <b>{{order.customerName}} - SĐT:
                                                                                {{order.phone}}</b> <br>
                                                                            Địa chỉ: <b>{{order.address}}
                                                                                {{order.ward ? "
                                                                                ," : ""}} {{order.ward}}
                                                                                {{order.district ?
                                                                                " ," : ""}} {{order.district}}
                                                                                {{order.province ? " ," : ""}}
                                                                                {{order.province}}</b> <br>
                                                                        </div>
                                                                        <table class="mt-4 table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>STT</th>
                                                                                    <th>Sản phẩm</th>
                                                                                    <th>Size</th>
                                                                                    <th>Màu sắc</th>
                                                                                    <th>Giá tiền</th>
                                                                                    <th>Số lượng</th>
                                                                                    <th>Tổng tiền</th>
                                                                                    <!-- <th>Thao tác</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    ng-repeat="orderDetail in order.orderDetails">
                                                                                    <td>{{$index + 1}}</td>
                                                                                    <td>
                                                                                        {{orderDetail.product.name}}
                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.productDetail.size.name}}
                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.productDetail.color.name}}

                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.price |
                                                                                        currency : ""
                                                                                        : 0}}₫

                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.quantity}}

                                                                                    </td>
                                                                                    <td>
                                                                                        {{orderDetail.price *
                                                                                        orderDetail.quantity |
                                                                                        currency : ""
                                                                                        : 0}}₫
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <div>
                                                                            <div class="d-flex justify-content-end">
                                                                                <div>
                                                                                    <p>Giảm giá:
                                                                                        <b ng-if="!order.voucher">0₫</b>
                                                                                        <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                            | currency : "" :
                                                                                            0}}₫</b>
                                                                                    </p>
                                                                                    <p>Phí ship:
                                                                                        <b>+{{ order.totalShip |
                                                                                            currency:
                                                                                            "" : 0 }}₫</b>
                                                                                    </p>
                                                                                    <h5>Tổng tiền: <b>{{
                                                                                            order.totalMoney |
                                                                                            currency : "" : 0}}₫</b>
                                                                                    </h5>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                            data-bs-dismiss="modal">Hủy</button>
                                                                        <button type="button" class="btn btn-primary"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-dismiss="modal"
                                                                            data-bs-target="#confirmRollbackNoDelivery{{$index}}">Xác
                                                                            nhận</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Modal xác nhận rollback order no delivery -->
                                                    <div class="modal fade" id="confirmRollbackNoDelivery{{$index}}"
                                                        tabindex="-1" aria-labelledby="exampleModalLabel"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    Bạn có chắn chắn muốn chuyển đơn hàng này về đang
                                                                    chờ shipper
                                                                    không?
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        data-bs-toggle="modal" data-bs-dismiss="modal"
                                                                        data-bs-target="#confirmDelivering{{$index}}">Hủy</button>
                                                                    <button type="button" class="btn btn-primary"
                                                                        data-bs-dismiss="modal"
                                                                        ng-click="updateStatusOrderNoDelivery(order, $index)">Xác
                                                                        nhận</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Modal chi tiet đơn hang: -->
                                                    <div class="modal fade" id="detailModalNoDelivery{{$index}}"
                                                        tabindex="-1" aria-labelledby="exampleModalLabel"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog modal-xl">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">
                                                                        Chi tiết đơn hàng: {{order.code}}
                                                                    </h5>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <!--table model-->
                                                                <div class="modal-body">
                                                                    <div>
                                                                        Mã đơn hàng: <b> {{order.code}} </b> - Ngày tạo:
                                                                        <b>{{order.createdDate | date:"dd/MM/yyyy ' - '
                                                                            h:mma"}}</b>
                                                                        - {{order.paymentType == "VNPAY"?"Đã thanh toán
                                                                        online" : "Thanh toán khi nhận hàng"}}<br>
                                                                        Tên khách hàng: <b>{{order.customerName}} - SĐT:
                                                                            {{order.phone}}</b> <br>
                                                                        Địa chỉ: <b>{{order.address}} {{order.ward ? "
                                                                            ," : ""}} {{order.ward}} {{order.district ?
                                                                            " ," : ""}} {{order.district}}
                                                                            {{order.province ? " ," : ""}}
                                                                            {{order.province}}</b> <br>
                                                                    </div>
                                                                    <table class="mt-4 table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>STT</th>
                                                                                <th>Sản phẩm</th>
                                                                                <th>Size</th>
                                                                                <th>Màu sắc</th>
                                                                                <th>Giá tiền</th>
                                                                                <th>Số lượng</th>
                                                                                <th>Tổng tiền</th>
                                                                                <!-- <th>Thao tác</th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                ng-repeat="orderDetail in order.orderDetails">
                                                                                <td>{{$index + 1}}</td>
                                                                                <td>
                                                                                    {{orderDetail.product.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.size.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.color.name}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price | currency : ""
                                                                                    : 0}}₫

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.quantity}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price *
                                                                                    orderDetail.quantity | currency : ""
                                                                                    : 0}}₫
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <div>
                                                                        <div class="d-flex justify-content-end">
                                                                            <div>
                                                                                <p>Giảm giá:
                                                                                    <b ng-if="!order.voucher">0₫</b>
                                                                                    <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                        | currency : "" : 0}}₫</b>
                                                                                </p>
                                                                                <p>Phí ship:
                                                                                    <b>+{{ order.totalShip | currency:
                                                                                        "" : 0 }}₫</b>
                                                                                </p>
                                                                                <h5>Tổng tiền: <b>{{ order.totalMoney |
                                                                                        currency : "" : 0}}₫</b></h5>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- modal update -->
                                                    <div class="modal fade" id="updateOrderNoDelivery{{$index}}"
                                                        tabindex="-1" aria-labelledby="exampleModalLabel"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog modal-xl">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">
                                                                        Chi tiết đơn hàng: {{order.code}}
                                                                    </h5>
                                                                    <button type="button" class="btn-close"
                                                                        ng-click="cancelUpdate()"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <!--table model-->
                                                                <div class="modal-body row">
                                                                    <div class="">
                                                                        <div class="col-11">
                                                                            Mã đơn hàng: <b> {{order.code}} </b> - Ngày
                                                                            tạo: <b>{{order.createdDate}}</b> -
                                                                            {{order.paymentType == "VNPAY"?"Đã thanh
                                                                            toán online" : "Thanh toán khi nhận
                                                                            hàng"}}<br>

                                                                            <div class="row mt-3">
                                                                                <div class="col-1">
                                                                                    <label for="">
                                                                                        <h2><i class="bi bi-person"></i>
                                                                                        </h2>
                                                                                    </label>
                                                                                </div>
                                                                                <div class="col-11">
                                                                                    <div class="row">
                                                                                        <div class="col-6">
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                ng-model="order.customerName"
                                                                                                placeholder="Tên người nhận">
                                                                                        </div>
                                                                                        <div class="col-6">
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                ng-model="order.phone"
                                                                                                placeholder="Số điện thoại">
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row mt-2"
                                                                                ng-if="order.orderType == 'ONLINE' || order.orderType == 'ONLINE_WEB' ">
                                                                                <div class="col-1">
                                                                                    <label for="">
                                                                                        <h2><i
                                                                                                class="bi bi-geo-alt"></i>
                                                                                        </h2>
                                                                                    </label>
                                                                                </div>
                                                                                <div class="col-11">
                                                                                    <div class="row">
                                                                                        <div class="col-6">
                                                                                            <input
                                                                                                class="form-control dropdown-toggle"
                                                                                                type="text"
                                                                                                id="orderProvince{{$index}}"
                                                                                                ng-model="order.province"
                                                                                                ng-focus="showProvince()"
                                                                                                placeholder="Tỉnh, thành phố.."
                                                                                                data-bs-toggle="dropdown"
                                                                                                aria-expanded="false" />
                                                                                            <div class="dropdown-menu"
                                                                                                aria-labelledby="orderProvince{{$index}}"
                                                                                                style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                <p id="province"
                                                                                                    ng-repeat="province in listProvince"
                                                                                                    ng-click="chooseProvince(province.ProvinceID, $parent.$index)">
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">{{province.ProvinceName}}</a>
                                                                                                </p>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-6">
                                                                                            <input
                                                                                                class="form-control dropdown-toggle"
                                                                                                type="text"
                                                                                                id="orderDistrict{{$index}}"
                                                                                                ng-model="order.district"
                                                                                                ng-focus="showDistrict()"
                                                                                                placeholder="Quận/Huyện..."
                                                                                                data-bs-toggle="dropdown"
                                                                                                aria-expanded="false" />
                                                                                            <div ng-show="order.province"
                                                                                                class="dropdown-menu"
                                                                                                aria-labelledby="orderDistrict{{$index}}"
                                                                                                style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                <p id="district"
                                                                                                    ng-repeat="district in listDistrict"
                                                                                                    ng-click="chooseDistrict(district.DistrictID, $parent.$index)">
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">{{district.DistrictName}}</a>
                                                                                                </p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row mt-2">
                                                                                        <div class="col-6">
                                                                                            <input
                                                                                                class="form-control dropdown-toggle"
                                                                                                type="text"
                                                                                                id="orderWard{{$index}}"
                                                                                                ng-model="order.ward"
                                                                                                ng-focus="showWard()"
                                                                                                placeholder="Phường, xã..."
                                                                                                data-bs-toggle="dropdown"
                                                                                                aria-expanded="false" />
                                                                                            <div ng-show="order.district"
                                                                                                class="dropdown-menu"
                                                                                                aria-labelledby="orderWard{{$index}}"
                                                                                                style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                                <p id="ward"
                                                                                                    ng-repeat="ward in listWard"
                                                                                                    ng-click="chooseWard(ward.WardCode, $parent.$index)">
                                                                                                    <a href=""
                                                                                                        style="text-decoration: none; color: black;">{{ward.WardName}}</a>
                                                                                                </p>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-6">
                                                                                            <input type="text"
                                                                                                class="form-control"
                                                                                                ng-model="order.address"
                                                                                                placeholder="Địa chỉ chi tiết">
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row mt-3">
                                                                                <div class="col-1">
                                                                                    Trạng thái
                                                                                </div>
                                                                                <div class="col-11">
                                                                                    <div class="row">
                                                                                        <div class="col-6">
                                                                                            <select class="form-select"
                                                                                                ng-model="order.status"
                                                                                                id="order{{$index}}">
                                                                                                <option
                                                                                                    ng-repeat="status in orderStatus"
                                                                                                    value="{{status.value}}">
                                                                                                    {{status.text}}
                                                                                                </option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div
                                                                            class="d-flex justify-content-center mt-3 mt-2">
                                                                            <div class="col-10">
                                                                                <input type="text"
                                                                                    ng-model="nameProduct"
                                                                                    id="productOrder"
                                                                                    ng-focus="showAllProduct()"
                                                                                    data-bs-toggle="dropdown"
                                                                                    aria-expanded="false"
                                                                                    ng-change="searchProduct()"
                                                                                    class="form-control"
                                                                                    placeholder="Tìm kiếm sản phẩm...">

                                                                                <div class="dropdown-menu"
                                                                                    aria-labelledby="productOrder"
                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                    <div ng-show="products"
                                                                                        ng-repeat="product in products">
                                                                                        <div id="productDetail"
                                                                                            ng-repeat="productDetail in product.productDetails">
                                                                                            <p
                                                                                                ng-click="chooseProduct(product, productDetail, $parent.$parent.$index)">
                                                                                                <a href=""
                                                                                                    style="text-decoration: none; color: black;">
                                                                                                    {{product.name}} -
                                                                                                    {{product.price |
                                                                                                    currency : "" : 0}}₫
                                                                                                </a><br>
                                                                                                <a href=""
                                                                                                    style="text-decoration: none; color: black;">
                                                                                                    Size{{productDetail.size.name}}
                                                                                                    - Màu:
                                                                                                    {{productDetail.color.name}}
                                                                                                    - Độ cao đế:
                                                                                                    {{productDetail.height.height}}cm
                                                                                                    - Chất liệu:
                                                                                                    {{productDetail.material.name}}
                                                                                                </a>
                                                                                            </p>
                                                                                            <hr>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <table class="mt-4 table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>STT</th>
                                                                                <th>Sản phẩm</th>
                                                                                <th>Size</th>
                                                                                <th>Màu sắc</th>
                                                                                <th>Giá tiền</th>
                                                                                <th>Số lượng</th>
                                                                                <th>Tổng tiền</th>
                                                                                <th></th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                ng-repeat="orderDetail in order.orderDetails">
                                                                                <td>{{$index + 1}}</td>
                                                                                <td>
                                                                                    {{orderDetail.product.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.size.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.color.name}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price}}
                                                                                </td>
                                                                                <td>
                                                                                    <div
                                                                                        class="d-flex justify-content-center align-center">
                                                                                        <input type="number"
                                                                                            ng-change="changeQuantity($parent.$index)"
                                                                                            class="col-2"
                                                                                            ng-model="orderDetail.quantity"
                                                                                            min="1"
                                                                                            oninput="this.value = Math.abs(this.value)">
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price *
                                                                                    orderDetail.quantity}}
                                                                                </td>
                                                                                <td>
                                                                                    <div class="row">
                                                                                        <h5 class="col-auto mt-2">
                                                                                            <a type="button"
                                                                                                ng-click="a($index, $parent.$index)"
                                                                                                class="ps-2"
                                                                                                style="color: rgb(234, 55, 55);">
                                                                                                <i
                                                                                                    class="bi bi-trash"></i>
                                                                                            </a>
                                                                                        </h5>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <div>
                                                                        <div class="d-flex justify-content-end">
                                                                            <div>
                                                                                <p>Giảm giá:
                                                                                    <b ng-if="!order.voucher">0₫</b>
                                                                                    <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                        | currency : "" : 0}}₫</b>
                                                                                </p>
                                                                                <p>Phí ship:
                                                                                    <b>+{{ order.totalShip | currency:
                                                                                        "" : 0 }}₫</b>
                                                                                </p>
                                                                                <h5>Tổng tiền: <b>{{ order.totalMoney |
                                                                                        currency : "" : 0}}₫</b></h5>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        data-bs-dismiss="modal"
                                                                        ng-click="cancelUpdate()">Hủy</button>
                                                                    <button type="button" class="btn btn-primary"
                                                                        data-bs-toggle="modal" data-bs-dismiss="modal"
                                                                        data-bs-target="#updateProduct{{$index}}">Cập
                                                                        nhật</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Page-->
        <div>
            <nav aria-label="Page navigation example" class="mt-3 offset-5">
                <ul class="pagination pagination-sm">
                    <li ng-class="['page-item', {{ pageIndexNoDelivery == 0 ? 'disabled' : '' }} ]">
                        <a href="" class="page-link" aria-label="Previous" ng-click="prevNoDelivery()">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li ng-class="['page-item', {{ pageIndexNoDelivery == totalPage ? 'disabled' : '' }} ]">
                        <a href="" class="page-link" aria-label="Next" ng-click="nextNoDelivery()">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="d-flex justify-content-end" style="margin-top: -50px;">
                <p style="background-color: rgb(228, 226, 226);">
                    {{pageIndexNoDelivery + 1}}/{{countNoDelivery}}
                </p>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="canceled" role="tabpanel" aria-labelledby="canceled-tab">
        <div class="row mt-3">
            <h3 class="text-center mb-3"> <b> Đơn hàng bị hủy</b></h3>
            <div class="row">
                <div class="col-12 col-sm-6 col-xl-3">
                    <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                        ng-focus="searchOrderCanceled()" ng-model="orderCode" ng-keyup="searchOrderCanceled()">
                </div>
                <div class="col-12 col-sm-6 col-xl-5">
                    <form class="d-flex">
                        <input class="form-control me-2" type="date" ng-model="beginDate"
                            ng-change="changeBeginDateCanceled()">
                        <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                        <input class="form-control me-2" type="date" ng-model="endDate"
                            ng-change="changeEndDateCanceled()">
                    </form>
                </div>
                <div class="col-12 col-sm-6 col-xl-2">
                    <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Giá tiền
                    </div>
                    <ul class="dropdown-menu" style="max-width: 244px;">
                        <li>
                            <select class="form-select dropdown-item filter" ng-change="findOrderByTotalMoneyCanceled()"
                                ng-model="findByTotal">
                                <option selected disabled>Gợi ý</option>
                                <option value="1">0 - 1,000,000</option>
                                <option value="2">1,000,000 - 3,000,000</option>
                                <option value="3">3,000,000 - 5,000,000</option>
                            </select>
                        </li>
                        <li>
                            <b class="ps-3">Tùy chỉnh</b>
                            <div class="mt-2">
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Từ"
                                        ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyCanceled()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Đến"
                                        ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyCanceled()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-1">
                    <button ng-click="resetOrderCanceled()" class="btn btn-primary">Reset</button>
                </div>
            </div>
        </div>
        <div class="row mt-6">
            <div class="col-sm-12 col-md-12">
                <div class="row mt-3">
                    <div class="mb-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table id="example" class="table data-table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Mã ĐH</th>
                                                <th>Mã GHN</th>
                                                <th>Người tạo</th>
                                                <th>Khách hàng</th>
                                                <th>Địa chỉ</th>
                                                <th>Tổng tiền</th>
                                                <th>Thanh toán</th>
                                                <th>Trạng thái</th>
                                                <th>Thao tác</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="order in orderCanceled">
                                                <td>#{{order.code}}</td>
                                                <td>{{order.codeGHN}}</td>
                                                <td>
                                                    {{order.orderType != "ONLINE_WEB" ? order.createBy.username : "" }}
                                                </td>
                                                <td>
                                                    {{order.customerName}} <br>
                                                    SĐT: {{order.phone}}
                                                </td>
                                                <td>
                                                    {{order.address}} <br>
                                                    {{order.ward}} {{order.district ? " ," : ""}} {{order.district}}
                                                    {{order.province ? " ," : ""}} {{order.province}}
                                                </td>
                                                <td>
                                                    {{order.totalMoney | currency : "" : 0}}₫
                                                </td>
                                                <td ng-if="order.paymentType == 'VNPAY' ">Đã thanh toán online</td>
                                                <td ng-if="order.paymentType != 'VNPAY' ">Thanh toán khi nhận hàng</td>
                                                <td>
                                                    {{order.status}}
                                                </td>
                                                <td>
                                                    <div class="row">
                                                        <div class="col-auto pt-1">
                                                            <h4>
                                                                <a href="#" style="color: rgb(8, 159, 41);"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#detailModalCanceled{{$index}}">
                                                                    <i class="bi bi-eye"></i>
                                                                </a>
                                                            </h4>
                                                        </div>
                                                    </div>
                                                    <!-- Modal chi tiet đơn hang: -->
                                                    <div class="modal fade" id="detailModalCanceled{{$index}}"
                                                        tabindex="-1" aria-labelledby="exampleModalLabel"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog modal-xl">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">
                                                                        Chi tiết đơn hàng: {{order.code}}
                                                                    </h5>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <!--table model-->
                                                                <div class="modal-body">
                                                                    <div>
                                                                        Mã đơn hàng: <b> {{order.code}} </b> - Ngày tạo:
                                                                        <b>{{order.createdDate | date:"dd/MM/yyyy ' - '
                                                                            h:mma"}}</b> - {{order.paymentType ==
                                                                        "VNPAY"?"Đã thanh toán online" : "Thanh toán khi
                                                                        nhận hàng"}}<br>
                                                                        Tên khách hàng: <b>{{order.customerName}} - SĐT:
                                                                            {{order.phone}}</b> <br>
                                                                        Địa chỉ: <b>{{order.address}} {{order.ward ? "
                                                                            ," :
                                                                            ""}} {{order.ward}} {{order.district ? " ,"
                                                                            :
                                                                            ""}} {{order.district}} {{order.province ? "
                                                                            ,"
                                                                            : ""}} {{order.province}}</b> <br>
                                                                    </div>
                                                                    <table class="mt-4 table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>STT</th>
                                                                                <th>Sản phẩm</th>
                                                                                <th>Size</th>
                                                                                <th>Màu sắc</th>
                                                                                <th>Giá tiền</th>
                                                                                <th>Số lượng</th>
                                                                                <th>Tổng tiền</th>
                                                                                <!-- <th>Thao tác</th> -->
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                ng-repeat="orderDetail in order.orderDetails">
                                                                                <td>{{$index + 1}}</td>
                                                                                <td>
                                                                                    {{orderDetail.product.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.size.name}}
                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.productDetail.color.name}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price | currency : ""
                                                                                    :
                                                                                    0}}₫

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.quantity}}

                                                                                </td>
                                                                                <td>
                                                                                    {{orderDetail.price *
                                                                                    orderDetail.quantity | currency : ""
                                                                                    :
                                                                                    0}}₫
                                                                                </td>

                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <div>
                                                                        <div class="d-flex justify-content-end">
                                                                            <div>
                                                                                <p>Giảm giá:
                                                                                    <b ng-if="!order.voucher">0₫</b>
                                                                                    <b ng-if="order.voucher">-{{order.voucher.promotion
                                                                                        | currency : "" : 0}}₫</b>
                                                                                </p>
                                                                                <p>Phí ship:
                                                                                    <b>+{{ order.totalShip | currency:
                                                                                        "" :
                                                                                        0 }}₫</b>
                                                                                </p>
                                                                                <h5>Tổng tiền: <b>{{ order.totalMoney |
                                                                                        currency : "" : 0}}₫</b></h5>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Page-->
        <div>
            <nav aria-label="Page navigation example" class="mt-3 offset-5">
                <ul class="pagination pagination-sm">
                    <li ng-class="['page-item', {{ pageIndexCanceled == 0 ? 'disabled' : '' }} ]">
                        <a href="" class="page-link" aria-label="Previous" ng-click="prevCanceled()">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li ng-class="['page-item', {{ pageIndexCanceled == totalPage ? 'disabled' : '' }} ]">
                        <a href="" class="page-link" aria-label="Next" ng-click="nextCanceled()">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="d-flex justify-content-end" style="margin-top: -50px;">
                <p style="background-color: rgb(228, 226, 226);">
                    {{pageIndexCanceled + 1}}/{{countCanceled}}
                </p>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="returnorder" role="tabpanel" aria-labelledby="returnorder-tab">
        <div class="row mt-3">
            <h3 class="text-center"><b>Đổi - trả hàng</b></h3>
            <div class="row">
                <div class="col-12 col-sm-6 col-xl-3">
                    <input class="form-control" type="search" placeholder="Tìm kiếm đơn hàng..."
                        ng-focus="searchOrderCanceled()" ng-model="orderCode" ng-keyup="searchOrderCanceled()">
                </div>
                <div class="col-12 col-sm-6 col-xl-5">
                    <form class="d-flex">
                        <input class="form-control me-2" type="date" ng-model="beginDate"
                            ng-change="changeBeginDateCanceled()">
                        <div class="mt-2"><i class="bi bi-arrow-right"></i></div>
                        <input class="form-control me-2" type="date" ng-model="endDate"
                            ng-change="changeEndDateCanceled()">
                    </form>
                </div>
                <div class="col-12 col-sm-6 col-xl-2">
                    <div type="button" class="col-12 btn dropdown-toggle border" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Giá tiền
                    </div>
                    <ul class="dropdown-menu" style="max-width: 244px;">
                        <li>
                            <select class="form-select dropdown-item filter" ng-change="findOrderByTotalMoneyCanceled()"
                                ng-model="findByTotal">
                                <option selected disabled>Gợi ý</option>
                                <option value="1">0 - 1,000,000</option>
                                <option value="2">1,000,000 - 3,000,000</option>
                                <option value="3">3,000,000 - 5,000,000</option>
                            </select>
                        </li>
                        <li>
                            <b class="ps-3">Tùy chỉnh</b>
                            <div class="mt-2">
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Từ"
                                        ng-model="findByTotalBegin" ng-change="findOrderByTotalMoneyCanceled()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                                <div class="mt-2 ps-3 pe-3">
                                    <input type="number" class="form-control" placeholder="Đến"
                                        ng-model="findByTotalEnd" ng-change="findOrderByTotalMoneyCanceled()" min="1"
                                        oninput="this.value = Math.abs(this.value)">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-1">
                    <button ng-click="resetOrderCanceled()" class="btn btn-primary">Reset</button>
                </div>
            </div>
        </div>
        <!-- modal show doi tra hang -->
        <div class="modal fade" id="modalReturnOrder" aria-hidden="true" aria-labelledby="modalReturnOrderLabel"
            tabindex="-1">
            <div class="modal-dialog modal-xl ">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                            ng-click="cancel()"></button>
                    </div>
                    <!--table model-->
                    <div class="modal-body row">
                        <div>
                            Mã đơn hàng: <b> {{orderReturn.code}} </b> - Ngày tạo: <b>{{orderReturn.createdDate |
                                date:"dd/MM/yyyy ' - ' h:mma" }}</b> <br>
                            Tên khách hàng: <b>{{orderReturn.customerName}} - SĐT: {{orderReturn.phone}}</b> <br>
                            Địa chỉ: <b>{{orderReturn.address}}, {{orderReturn.ward}}, {{orderReturn.district}},
                                {{orderReturn.province}}</b> <br>
                        </div>
                        <div class="col-7 mt-4">
                            <div class="d-flex justify-content-center">
                                <p>Các sản phẩm</p>
                            </div>
                            <table class="table table-responsive">
                                <thead>
                                    <tr>
                                        <th>STT</th>
                                        <th>Sản phẩm</th>
                                        <th>Size</th>
                                        <th>Màu sắc</th>
                                        <th>Giá tiền</th>
                                        <th>Số lượng</th>
                                        <th ng-show="!active">Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="orderDetail in orderReturn.orderDetails">
                                        <td>{{$index + 1}}</td>
                                        <td>
                                            {{orderDetail.product.name}}
                                        </td>
                                        <td>
                                            {{orderDetail.productDetail.size.name}}
                                        </td>
                                        <td>
                                            {{orderDetail.productDetail.color.name}}

                                        </td>
                                        <td>
                                            {{orderDetail.price | currency : "" : 0}}₫

                                        </td>
                                        <td>
                                            {{orderDetail.quantity}}

                                        </td>
                                        <td ng-show="!active">
                                            <div class="d-flex justify-content-between">
                                                <a href="" ng-click="changeProductReturn($index)" data-bs-toggle="modal"
                                                    data-bs-target="#changeProduct" data-bs-dismiss="modal">Đổi</a>
                                                <div></div>
                                                <a href="" ng-click="returnProductReturn($index)" data-bs-toggle="modal"
                                                    data-bs-target="#returnProduct" data-bs-dismiss="modal">Trả</a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-5 mt-4 border-start">
                            <div class="d-flex justify-content-center">
                                <p>Xem lại</p>
                            </div>
                            <table class="table table-responsive">
                                <thead>
                                    <tr>
                                        <th>STT</th>
                                        <th>Sản phẩm</th>
                                        <th>Size</th>
                                        <th>Màu sắc</th>
                                        <th>Số lượng</th>
                                        <th>&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="history in orderReturnHistory">
                                        <td>{{$index + 1}}</td>
                                        <td>
                                            {{history.orderDetail.product.name}}
                                        </td>
                                        <td>
                                            {{history.productDetail.size.name}}
                                        </td>
                                        <td>
                                            {{history.productDetail.color.name}}

                                        </td>
                                        <td>
                                            {{history.quantity}}
                                            <!-- <input type="number" ng-model="history.quantity" style="max-width: 50px;" ng-change="changeQuantityOrderReturn(index)"> -->
                                        </td>
                                        <td>
                                            {{history.action == "DOI" ? "Đổi" : "Trả" }}
                                        </td>
                                        <td>
                                            <a type="button" ng-click="chooseProductInReturnOrder($index)"
                                                data-bs-dismiss="modal" data-bs-toggle="modal"
                                                data-bs-target="#deleteProductReturnOrder">
                                                <i style="color: red;" class="bi bi-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div>
                            <form action="" name="form_OrderDt">
                                <label for="">Lý do đổi trả<span class="text-danger">*</span></label>
                                <textarea class="form-control" rows="3" ng-if="!orderReturn.orderHistories"
                                    ng-model="reasonReturn"></textarea>
                                <textarea class="form-control" rows="3" ng-if="orderReturn.orderHistories"
                                    ng-disabled="true" ng-model="orderReturn.orderHistories[0].description"
                                    name="description" ng-required="true" ng-trim="true" minlength="5" maxlength="255"
                                    autocomplete="off"></textarea>
                                <div class="text-danger"
                                    ng-hide="form_OrderDt.description.$untouched || form_OrderDt.description.$valid">
                                    <small class="text-danger" ng-show="form_OrderDt.description.$error.required"> Vui
                                        lòng nhập lý do đổi trả!</small>
                                    <small class="text-danger" ng-show="form_OrderDt.description.$error.minlength">Hãy
                                        nhập thông tin hợp lệ!</small>
                                    <small class="text-danger" ng-show="form_OrderDt.description.$error.maxlength">Không
                                        được nhập quá 255 ký tự!</small>
                                </div>
                            </form>
                        </div>
                        <div ng-if="orderReturn.orderHistories && orderReturn.orderHistories[0].status == 'DONE' ">
                            <h5>Lịch sử đổi trả</h5>
                            <table class="table table-responsive">
                                <thead>
                                    <tr>
                                        <th>STT</th>
                                        <th>Sản phẩm</th>
                                        <th>Size</th>
                                        <th>Màu sắc</th>
                                        <th>Số lượng</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="orderHistory in orderReturn.orderHistories">
                                        <td>{{$index + 1}}</td>
                                        <td>
                                            {{orderHistory.orderDetail.product.name}}
                                        </td>
                                        <td>
                                            {{orderHistory.productDetail.size.name}}
                                        </td>
                                        <td>
                                            {{orderHistory.productDetail.color.name}}
                                        </td>
                                        <td>
                                            {{orderHistory.quantity}}
                                        </td>
                                        <td>
                                            {{orderHistory.action == "DOI" ? "Đổi" : "Trả"}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div ng-if="!active">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                ng-click="cancel()">Hủy</button>
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-bs-toggle="modal"
                                data-bs-target="#updateReturnOrder">Xác nhận</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal tra hang-->
        <div class="modal fade" id="returnProduct" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" aria-label="Close" data-bs-toggle="modal"
                            data-bs-dismiss="modal" data-bs-target="#modalReturnOrder"></button>
                    </div>
                    <div class="modal-body">
                        <input type="number" class="form-control" ng-model="orderReturnWaitQuantityReturn"
                            placeholder="Nhập số lượng" min="1" oninput="this.value = Math.abs(this.value)">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-bs-toggle="modal"
                            data-bs-target="#modalReturnOrder">Hủy</button>
                        <button type="button" ng-click="returnMultipleProduct()" class="btn btn-primary"
                            data-bs-dismiss="modal" data-bs-toggle="modal"
                            data-bs-target="#modalReturnOrder">Trả</button>
                        <button type="button" ng-click="returnAllProduct()" class="btn btn-primary"
                            data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#modalReturnOrder">Trả tất
                            cả</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal doi hang-->
        <div class="modal fade" id="changeProduct" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                            data-bs-toggle="modal" data-bs-target="#modalReturnOrder"></button>
                    </div>
                    <div class="modal-body">
                        <input type="number" class="form-control" ng-model="orderReturnWaitQuantityChange"
                            placeholder="Nhập số lượng" min="1" oninput="this.value = Math.abs(this.value)">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-bs-toggle="modal"
                            data-bs-target="#modalReturnOrder">Hủy</button>
                        <button type="button" ng-click="changeMultipleProduct()" class="btn btn-primary"
                            data-bs-toggle="modal" data-bs-dismiss="modal"
                            data-bs-target="#modalReturnOrder">Đổi</button>
                        <button type="button" ng-click="changeAllProduct()" class="btn btn-primary"
                            data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#modalReturnOrder">Đổi tất
                            cả</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal xác nhận đổi trả hàng -->
        <div class="modal fade" id="updateReturnOrder" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="modal"
                            data-bs-target="#modalReturnOrder" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Xác nhận đổi trả hàng
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-dismiss="modal"
                            data-bs-target="#modalReturnOrder">Hủy</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                            ng-click="updateReturnOrder()">Xác nhận</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal xóa sản phẩm trong đơn trả hàng -->
        <div class="modal fade" id="deleteProductReturnOrder" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="modal"
                            data-bs-target="#modalReturnOrder" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Xóa sản phẩm này, hành động này không thể hoàn tác
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-dismiss="modal"
                            data-bs-target="#modalReturnOrder">Hủy</button>
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-dismiss="modal"
                            data-bs-target="#modalReturnOrder" ng-click="deleteProductInReturnOrder()">Xác nhận</button>
                    </div>
                </div>
            </div>
        </div>
        <nav class="mt-3">
            <div class="nav nav-tabs row" id="nav-tab" role="tablist">
                <button class="nav-link col-6 active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home"
                    type="button" role="tab2" aria-controls="nav-home" aria-selected="false"
                    ng-click="activeFalse()">Đơn yêu cầu</button>
                <button class="nav-link col-6" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home"
                    type="button" role="tab1" aria-controls="nav-home" aria-selected="true" ng-click="activeTrue()">Đã
                    xử lý</button>
            </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab"> 
                <div class="row mt-">
                    <div class="col-sm-12 col-md-12 mt-3">
                        <div class="row mt-3">
                            <div class="mb-3">
                                <div class="card">
                                    <div class="card-body mt-3">
                                        <div class="table-responsive">
                                            <table id="example" class="table data-table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Mã đơn hàng</th>
                                                        <th>Thời gian</th>
                                                        <th>Người tạo</th>
                                                        <th>Người cập nhật</th>
                                                        <th>Khách hàng</th>
                                                        <th>Hành động</th>
                                                        <th>Thao tác</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="order in orderRe">
                                                        <td>#{{order.code}}</td>
                                                        <td>{{order.createdDate | date:"dd/MM/yyyy ' - ' h:mma"}}</td>
                                                        <td>
                                                            {{order.orderType != "ONLINE_WEB" ? order.createBy.username
                                                            : "" }}
                                                        </td>
                                                        <td>
                                                            {{order.updateBy.username}}
                                                        </td>
                                                        <td>
                                                            {{order.customerName}} <br>
                                                            {{order.phone}}
                                                        </td>
                                                        <td class="align-items-center">
                                                            <a ng-repeat="orderHistory in order.orderHistories"
                                                                style="text-decoration: none; color: black;">
                                                                {{$index > 0 ? " - " : ""}}{{orderHistory.action ==
                                                                'DOI' ? "Đổi" : "Trả"}}
                                                            </a>
                                                        </td>
                                                        <td>
                                                            <div class="row">
                                                                <div class="col-auto pt-2">
                                                                    <h4>
                                                                        <a href="" style="color: rgb(8, 159, 41);"
                                                                            ng-click="chooseOrderReturn(order, $index)">
                                                                            <i class="bi bi-eye"></i>
                                                                        </a>
                                                                    </h4>
                                                                </div>
                                                                <div class="col-auto pt-2">
                                                                    <h5>
                                                                        <a href="#" class="ps-2"
                                                                            style="color: rgb(234, 55, 55);"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-target="#unConfirmOrderReturn{{$index}}">
                                                                            <i class="bi bi-x-circle"></i>
                                                                        </a>
                                                                    </h5>
                                                                </div>
                                                            </div>

                                                            <!-- Modal view detail -->
                                                            <div class="modal fade" id="detailModal{{$index}}"
                                                                tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                aria-hidden="true">
                                                                <div class="modal-dialog modal-xl">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Chi tiết đơn hàng: {{order.code}}
                                                                            </h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <!--table model-->
                                                                        <div class="modal-body">
                                                                            <div>
                                                                                Mã đơn hàng: <b> {{order.code}} </b> -
                                                                                Ngày tạo: <b>{{order.createdDate |
                                                                                    date:"dd/MM/yyyy ' - ' h:mma"}}</b>
                                                                                <br>
                                                                                Tên khách hàng:
                                                                                <b>{{order.customerName}} - SĐT:
                                                                                    {{order.phone}}</b> <br>
                                                                                Địa chỉ: <b>{{order.address}},
                                                                                    {{order.ward}}, {{order.district}},
                                                                                    {{order.province}}</b> <br>
                                                                            </div>
                                                                            <table class="mt-4 table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>STT</th>
                                                                                        <th>Sản phẩm</th>
                                                                                        <th>Size</th>
                                                                                        <th>Màu sắc</th>
                                                                                        <th>Giá tiền</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiền</th>
                                                                                        <!-- <th>Thao tác</th> -->
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr
                                                                                        ng-repeat="orderDetail in order.orderDetails">
                                                                                        <td>{{$index + 1}}</td>
                                                                                        <td>
                                                                                            {{orderDetail.product.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.size.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.color.name}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.quantity}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price *
                                                                                            orderDetail.quantity}}
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- modal unconfirm -->
                                                            <div class="modal fade" id="unConfirmOrderReturn{{$index}}"
                                                                tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">Hủy đơn hàng</h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            Bạn có chắc chắn muốn hủy yêu cầu đổi/trả
                                                                            hàng này ?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button" class="btn btn-danger"
                                                                                data-bs-dismiss="modal"
                                                                                ng-click="unConfirmReturnOrder(order, $index)">Xác
                                                                                nhận</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- modal confirm -->
                                                            <div class="modal fade" id="confirm{{$index}}" tabindex="-1"
                                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <!-- <h5 class="modal-title" id="exampleModalLabel">Xác đơn hàng</h5> -->
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            Xác nhận đơn đổi/trả hàng này ?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-dismiss="modal"
                                                                                ng-click="confirmReturnOrder(order, $index)">Xác
                                                                                nhận</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- modal update -->
                                                            <div class="modal fade" id="update{{$index}}" tabindex="-1"
                                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog modal-xl">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="exampleModalLabel">
                                                                                Chi tiết đơn hàng: {{order.code}}
                                                                            </h5>
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <!--table model-->
                                                                        <div class="modal-body row">
                                                                            <div class="col-9">
                                                                                Mã đơn hàng: <b> {{order.code}} </b> -
                                                                                Ngày tạo: <b>{{order.createdDate |
                                                                                    date:"dd/MM/yyyy ' - ' h:mma"}}</b>
                                                                                <br>
                                                                                Tên khách hàng:
                                                                                <b>{{order.customerName}} - SĐT:
                                                                                    {{order.phone}}</b> <br>
                                                                                Địa chỉ: <b>{{order.address}},
                                                                                    {{order.ward}}, {{order.district}},
                                                                                    {{order.province}}</b> <br>
                                                                            </div>
                                                                            <div class="col-3 d-flex align-items-end">
                                                                                <input type="text"
                                                                                    ng-model="nameProduct"
                                                                                    id="productOrder"
                                                                                    ng-focus="showAllProduct()"
                                                                                    data-bs-toggle="dropdown"
                                                                                    aria-expanded="false"
                                                                                    ng-keyup="searchProduct()"
                                                                                    class="form-control"
                                                                                    placeholder="Tên sản phẩm...">

                                                                                <div class="dropdown-menu"
                                                                                    aria-labelledby="productOrder"
                                                                                    style="width: 210px; height: 200px; overflow-y: scroll">
                                                                                    <div ng-show="products"
                                                                                        ng-repeat="product in products">
                                                                                        <div id="productDetail"
                                                                                            ng-repeat="productDetail in product.productDetails">
                                                                                            <p
                                                                                                ng-click="chooseProduct(product, productDetail, $parent.$parent.$index)">
                                                                                                <a href=""
                                                                                                    style="text-decoration: none; color: black;">
                                                                                                    {{product.name}} -
                                                                                                    {{product.price |
                                                                                                    currency : "" : 0}}₫
                                                                                                </a><br>
                                                                                                <a href=""
                                                                                                    style="text-decoration: none; color: black;">
                                                                                                    Size{{productDetail.size.name}}
                                                                                                    - Màu:
                                                                                                    {{productDetail.color.name}}
                                                                                                    - Độ cao đế:
                                                                                                    {{productDetail.height.height}}cm
                                                                                                    - Chất liệu:
                                                                                                    {{productDetail.material.name}}
                                                                                                </a>
                                                                                            </p>
                                                                                            <hr>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                            <table class="mt-4 table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>STT</th>
                                                                                        <th>Sản phẩm</th>
                                                                                        <th>Size</th>
                                                                                        <th>Màu sắc</th>
                                                                                        <th>Giá tiền</th>
                                                                                        <th>Số lượng</th>
                                                                                        <th>Tổng tiền</th>
                                                                                        <th></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr
                                                                                        ng-repeat="orderDetail in order.orderDetails">
                                                                                        <td>{{$index + 1}}</td>
                                                                                        <td>
                                                                                            {{orderDetail.product.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.size.name}}
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.productDetail.color.name}}

                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price}}

                                                                                        </td>
                                                                                        <td>
                                                                                            <div
                                                                                                class="d-flex justify-content-center align-center">
                                                                                                <input type="number"
                                                                                                    ng-change="changeQuantity($parent.$index)"
                                                                                                    class="col-2"
                                                                                                    ng-model="orderDetail.quantity">
                                                                                            </div>
                                                                                        </td>
                                                                                        <td>
                                                                                            {{orderDetail.price *
                                                                                            orderDetail.quantity}}
                                                                                        </td>
                                                                                        <td>
                                                                                            <div class="row">
                                                                                                <h5
                                                                                                    class="col-auto mt-2">
                                                                                                    <a type="button"
                                                                                                        ng-click="a($index, $parent.$index)"
                                                                                                        class="ps-2"
                                                                                                        style="color: rgb(234, 55, 55);">
                                                                                                        <i
                                                                                                            class="bi bi-trash"></i>
                                                                                                    </a>
                                                                                                </h5>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <div class="d-flex justify-content-end">
                                                                                <h5>Tổng tiền đơn hàng: <b>{{ totalMoney
                                                                                        }}</b></h5>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#updateProduct{{$index}}">Cập
                                                                                nhật</button>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Modal xác nhận update product -->
                                                            <div class="modal fade" id="updateProduct{{$index}}"
                                                                tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                aria-hidden="true">
                                                                <div class="modal-dialog">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            Thay đổi đơn hàng
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                class="btn btn-secondary"
                                                                                data-bs-toggle="modal"
                                                                                data-bs-dismiss="modal"
                                                                                data-bs-target="#update{{$index}}">Hủy</button>
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                data-bs-dismiss="modal"
                                                                                ng-click="updateOrder($index)">Thay
                                                                                đổi</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <nav aria-label="Page navigation example" class="mt-3 offset-5">
                    <ul class="pagination pagination-sm">
                        <li ng-class="['page-item', {{ pageIndex == 0 ? 'disabled' : '' }} ]">
                            <a class="page-link" aria-label="Previous" ng-click="prev()">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li ng-class="['page-item', {{ pageIndex == totalPage ? 'disabled' : '' }} ]">
                            <a class="page-link" aria-label="Next" ng-click="next()">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>